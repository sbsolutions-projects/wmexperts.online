<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn technical and functional details about Warehouse Order Creation Rules DEF and UNDE in SAP EWM.">
    <meta name="keywords" content="SAP EWM, Warehouse Management, WOCR, DEF, UNDE, Warehouse Order Creation Rules">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Warehouse Order Creation Rules DEF and UNDE | WMexperts">
    <meta property="og:description" content="Learn technical and functional details about Warehouse Order Creation Rules DEF and UNDE in SAP EWM.">
    <meta property="article:published_time" content="2024-01-01">
    <meta property="article:modified_time" content="2024-01-01">

    <!-- Structured Data -->
    <script type="application/ld+json">
    [
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Warehouse Order Creation Rules DEF and UNDE",
        "description": "Learn technical and functional details about Warehouse Order Creation Rules DEF and UNDE in SAP EWM.",
        "image": "https://wmexperts.online/assets/images/placeholder.png",
        "datePublished": "2024-01-01",
        "dateModified": "2024-01-01",
        "author": {
          "@type": "Person",
          "name": "Hendrik"
        },
        "publisher": {
          "@type": "Organization",
          "name": "WMexperts",
          "logo": {
            "@type": "ImageObject",
            "url": "https://wmexperts.online/assets/logo.png"
          }
        }
      },
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://wmexperts.online/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "https://wmexperts.online/blog-posts/category/article-slug.html"
        }]
      }
    ]
    </script>

    <title>Warehouse Order Creation Rules DEF and UNDE | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sap-blue: #005597;
            --bg-light: #F9FAFB;
            --text-dark: #111827;
            --text-muted: #4B5563;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.8;
        }

        /* --- NAVIGATION --- */
        header {
            background: #fff;
            padding: 1rem 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo { font-weight: 600; font-size: 1.4rem; color: var(--text-dark); text-decoration: none; }
        .logo span { color: var(--sap-blue); }
        nav a { text-decoration: none; color: var(--text-muted); font-size: 0.9rem; font-weight: 600; }

        /* --- ARTICLE STRUCTURE --- */
        article { max-width: 800px; margin: 4rem auto; padding: 0 20px; }

        .breadcrumb {
            font-size: 0.75rem;
            color: var(--sap-blue);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.8rem; color: var(--text-dark); line-height: 1.2; margin-bottom: 1.5rem; letter-spacing: -1px; }

        /* --- RESPONSIVE VIDEO CONTAINER --- */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin: 2.5rem 0;
            border-radius: 12px;
            background: #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .content p { margin-bottom: 0.75rem; font-size: 1.1rem; }
        .content h2 { color: var(--text-dark); margin-top: 1.75rem; font-size: 1.8rem; border-bottom: 2px solid var(--bg-light); padding-bottom: 0.5rem; }
        .content ul { padding-left: 1.5rem; margin-bottom: 2rem; }
        .content li { margin-bottom: 0.75rem; font-size: 1.05rem; }

        /* --- TECHNICAL & IMAGE BLOCKS --- */
        .screenshot-container { margin: 1.75rem 0; text-align: center; }
        
        .screenshot-container img {
            max-width: 66.67%;
            height: auto;
            display: block;
            margin: 0 auto;
            background-color: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: zoom-in;
            transition: transform 0.2s ease;
        }

        .screenshot-container img:hover { transform: scale(1.01); }

        pre {
            background: #F3F4F6;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--sap-blue);
            margin: 2rem 0;
            color: var(--text-dark);
        }

        code {
            font-family: 'Courier New', monospace;
            background: #EEF2F6;
            color: var(--sap-blue);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.95em;
            font-weight: 500;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            font-weight: normal;
        }

        /* --- ENHANCED LIGHTBOX (ZOOM) STYLING --- */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            cursor: zoom-out;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        #lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease;
        }

        #lightbox img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            cursor: default;
        }

        /* Lightbox Controls */
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #ffffff;
            cursor: pointer;
            z-index: 10000;
            transition: transform 0.2s ease;
            font-weight: 300;
            line-height: 1;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            transform: rotate(90deg);
        }

        .lightbox-prev,
        .lightbox-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: #ffffff;
            cursor: pointer;
            padding: 20px;
            transition: opacity 0.2s ease;
            user-select: none;
            z-index: 10000;
        }

        .lightbox-prev:hover,
        .lightbox-next:hover {
            opacity: 0.7;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .lightbox-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 10000;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Prevent body scroll when lightbox is open */
        body.lightbox-open {
            overflow: hidden;
        }

        /* --- STAY UPDATED SECTION --- */
        .stay-updated {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .stay-updated-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stay-updated-card h3 {
            color: var(--text-dark);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stay-updated-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .newsletter-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .newsletter-form input {
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--sap-blue);
            box-shadow: 0 0 0 3px rgba(0, 85, 151, 0.1);
        }

        .btn-subscribe {
            padding: 10px 20px;
            background: var(--sap-blue);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-subscribe:hover {
            background: var(--sap-blue-light);
        }

        .btn-youtube {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 12px 24px;
            background: #ff0000;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s ease;
            width: fit-content;
            margin-top: auto;
        }

        .btn-youtube:hover {
            background: #cc0000;
        }

        @media (max-width: 768px) {
            .stay-updated {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* --- FOOTER & CTA --- */
        .freelancer-cta {
            margin-top: 6rem;
            padding: 3rem;
            background: var(--bg-light);
            border-radius: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .btn-freelance {
            display: inline-block;
            background: var(--sap-blue);
            color: #fff;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 1rem;
            transition: background 0.2s ease;
        }

        .btn-freelance:hover {
            background: #004276;
        }

        footer { padding: 4rem 10%; text-align: center; font-size: 0.85rem; color: #9CA3AF; border-top: 1px solid var(--border); }
    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="logo">WM<span>experts</span></a>
        <nav><a href="../../index.html">‚Üê Back to Blog</a></nav>
    </header>

    <article>
        <div class="breadcrumb">Reveal SAP EWM</div>
        <h1>Warehouse Order Creation Rules DEF and UNDE</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube-nocookie.com/embed/uNEjiqK9YYc" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p>Who hasn‚Äôt faced this situation before? You create a warehouse order, and EWM tells you that it used the warehouse order creation rule <code>DEF</code> (or <code>UNDE</code>). And you‚Äôre like, ‚ÄúWhat the hell!?‚Äù<br />This blog post will help you avoid this situation in the future. It will also help you understand that sometimes seeing one of these two WOCRs is a signal to fix an issue in your customizing, and other times it might be just fine.<br />A minimal intro for those of you starting your journey with EWM:</p>
            <p>A ‚ÄòWarehouse Order‚Äô bundles multiple ‚ÄòWarehouse Tasks‚Äô into processable work packages. The rules for this bundling process are called ‚ÄòWarehouse Order Creation Rules‚Äô. In the following, I will also use the abbreviation WOCRs to replace the long term.</p>
            <p>For those of you who are not familiar with how the WOCRs work in general, I would recommend to read <a href="../understand/understand-wocrs.html" target="_blank" rel="noopener">this blog</a> before reading/watching this one here.<br />Adding a small summary here, which you can skip in case you are familiar with the concept (source <a href="https://d.dam.sap.com/a/gNvgs8F/WarehouseOrderProcessing.pdf?rc=10" target="_blank" rel="noopener">SAP HTG for WHO enhancement</a>): </p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_02.png" alt="SAP EWM WOCR UNDE and DEF_02" loading="lazy">
            </div>
            
            <p><em>(1) Warehouse tasks are created in the system (for example, manually or by wave release).</em><br /><em>(2) (3) The system groups the warehouse tasks by queue and activity area, and determines possible warehouse order creation rules according to the settings made in the Customizing activity Define Search Sequence of Creation Rules for Activity Areas.</em><br /><em>(4) The system tries to apply the warehouse order creation rule according to the sequence specified in the Customizing activity Define Search Sequence of Creation Rules for Activity Areas.</em><br /><em>(5) The system sorts all the warehouse tasks based on the inbound sorting criteria of the warehouse order creation rule.</em><br /><em>(6) (7) At this stage, the system checks whether the sorted warehouse tasks pass the filter of the warehouse order creation rule on item level and on subtotal level.</em><br /><em>(8) The warehouse tasks that have passed the filters are considered when applying the limits specified in the warehouse order creation rule.</em><br /><em>(9) All the warehouse tasks that belong to one warehouse order are passed for packing proposal determination according to the packing profile of the warehouse order creation rule. As a result of the packing proposal determination, the system determines the creation of pick-HUs, the splitting of warehouse tasks (for example, to fit in a pick-HU), and the exclusion of warehouse tasks from the current warehouse order.</em><br /><em>(10) Finally, the warehouse tasks that belong to the current warehouse order are sorted according to the sorting rule of the warehouse order creation rule.</em></p>
            <p><em>After all the warehouse tasks have been checked against the warehouse order creation rule, the warehouse tasks that have not been bundled are checked against the next warehouse order creation rule defined in Customizing.</em></p>
            <p>Anyways ‚Äì back to the initial question.</p>
            <p><em>What are those <code>DEF</code> and <code>UNDE</code> WOCRs and why are they sometimes applied when creating WOCRs?</em><br />First a quick look into the standard customizing help text:</p>
            <p><em>We recommend that you avoid using the following abbreviations to identify warehouse order creation rules, since we have already assigned them internally for existing warehouse order creation rules. This ensures that the identification you define for a warehouse order creation rule is unique.</em></p>
            <ul>
                <li><em><code>DEF</code>: Standard rule</em></li>
                <li><em><code>UNDE</code>: Remainder rule</em></li>
            </ul>
            <p>‚Ä¶ok ‚Äì that does not help us at all.</p>
            <p>Another look into the SAP Press functional EWM books:</p>
            <ul>
                <li><em>If no warehouse order creation rule is set up in embedded EWM, it assigns all warehouse orders to default rule <code>DEF</code>.</em></li>
                <li><em>If there are no more warehouse order creation rules left in the sequence for a warehouse order, the system assigns them to default rule <code>UNDE</code>.</em><br /><em>‚Ä¶that goes into the right direction abut also comes with a very limited amount of details.</em></li>
            </ul>
            <p>The most helpful content that I‚Äôve found over the years was this extract from the HTG for developers, working with WOs: ‚Äò<a href="https://d.dam.sap.com/a/gNvgs8F/WarehouseOrderProcessing.pdf?rc=10" target="_blank" rel="noopener">How To Program Warehouse Order Processing in Extended Warehouse Management</a>‚Äô:</p>
            <p><em>If a warehouse task doesn't fit to any warehouse order creation rule, it's bundled with the rule Undefined (<code>UNDE</code>), together with all the other warehouse tasks that don‚Äôt fit to any warehouse order creation rule.</em><br /><em>If the system can‚Äôt find a warehouse order creation rule for an activity area in Customizing, the warehouse tasks are bundled with the warehouse order creation rule Default (<code>DEF</code>). This means that all the warehouse tasks for one delivery are bundled together if they are in the same activity area, except for the putaway warehouse tasks where the system creates one warehouse order for each putaway-HU warehouse task (fields <code>FLGHUTO</code> = X and <code>TRART</code> = <code>wmegc_trart_put</code> (1)).</em></p>
            <p>Why do I have to search for this information in the HTG for developers? Why is it not included in the customizing help text?</p>
            <p>Anyways - I still had some open questions, and the same is probably true for you. So, let us look into the system to see if we can find more details about this logic. As usual, I found some useful details that are not included in any of the SAP documents mentioned above!</p>
            <p>While trying to structure this post, I decided to start by looking at the application area of the WOCR <code>DEF</code>, first in the context of putaway and internal tasks, and then in the context of stock removal. In the second part of this post, we will concentrate on the WOCR <code>UNDE</code> and again separate it by process category (putaway vs. removal).</p>
            <p>Throughout the whole article, I am working with test cases and examples to help you understand my findings. In addition to this, you will also find all repository objects that are responsible for controlling the logic.</p>
            
            <h2>ANALYSING the WOCR ‚ÄòDEF‚Äô</h2>
            <p>At first we want to understand the purpose of the WOCR <code>DEF</code> in detail. Remember, the HTG gave us the following information:</p>
            <p><em>If the system can‚Äôt find a warehouse order creation rule for an activity area in Customizing, the warehouse tasks are bundled with the warehouse order creation rule Default (<code>DEF</code>). [‚Ä¶] except for the putaway warehouse tasks where the system creates one warehouse order for each putaway-HU warehouse task (fields <code>FLGHUTO</code> = X and <code>TRART</code> = <code>wmegc_trart_put</code> (1)).</em></p>
            <p>So, we start to analyze the behavior of the EWM standard in a situation where it cannot find any WOCR based on the given combination of activity area and activity. Let‚Äôs look at putaway and internal movements first, before we explore stock removal.</p>
            
            <p><strong>PUTAWAY/INTERNAL MOVEMENTS</strong></p>
            <p>I start using a warehouse process type of category ‚Äò1‚Äô (putaway) and removed the WOCR determination customizing for my given combination of AA and Activity. The only ones left for my AA were relevant for a different activity:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_03.png" alt="SAP EWM WOCR UNDE and DEF_03" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_04.png" alt="SAP EWM WOCR UNDE and DEF_04" loading="lazy">
            </div>
            
            <p>The coding which is responsible to apply WOCRs is called from FM <code>/SCWM/WHO_PARALLEL_CREATE</code>. Based on my customizing, it cannot find a WOCR for the given AA/activity and proceeds with the ‚Äòspecial logic‚Äô (trying to apply rule <code>MFS</code> or <code>DEF</code>). As our tasks are not relevant for a subsystem (rule <code>MFS</code>), the only option left is to hand over the constant for the rule <code>DEF</code> to the subroutine <code>who_wcr_apply</code>.</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_05.png" alt="SAP EWM WOCR UNDE and DEF_05" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_06.png" alt="SAP EWM WOCR UNDE and DEF_06" loading="lazy">
            </div>
            
            <p>If we are talking about HU WTs of the type ‚Äòputaway‚Äô (WPT <code>TRART</code> = ‚Äò1‚Äô &gt; see WPT customizing screenshot above), this subroutine will make sure to always create a separate WO for each WT.</p>
            <p>For our putaway example that means one WO for each HU WT which is created with a WPT of category ‚Äò1‚Äô:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_07.png" alt="SAP EWM WOCR UNDE and DEF_07" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_08.png" alt="SAP EWM WOCR UNDE and DEF_08" loading="lazy">
            </div>
            
            <p>And this is the result:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_09.png" alt="SAP EWM WOCR UNDE and DEF_09" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_10.png" alt="SAP EWM WOCR UNDE and DEF_10" loading="lazy">
            </div>
            
            <p>Double-checked with multiple HU-WTs, running through the WOCRs at the same time. Even if they are going to the same destination, EWM will create separate WOs:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_11.png" alt="SAP EWM WOCR UNDE and DEF_11" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_12.png" alt="SAP EWM WOCR UNDE and DEF_12" loading="lazy">
            </div>
            
            <p><strong>Main takeaway? or What does that mean for you?</strong></p>
            <p>If you are</p>
            <ul>
                <li>working with handling units as part of the inbound process</li>
                <li>and you have a simple putaway step/process</li>
                <li>where you want to create one warehouse order for each HU to be putaway</li>
            </ul>
            <p>‚Ä¶it is totally fine not to create any custom WOCR at all. You can keep the customizing lean at this point and work with the standard default (<code>DEF</code>) rule.</p>
            <p>But again ‚Äì this is only true if you are working with HU WTs and if your WPT is of type ‚Äòputaway‚Äô. Once you switch to product WTs or WPTs of type internal movements (e.g. for replenishment) EWM still applies the <code>DEF</code> rule if it does not find a WOCR but it does not apply the logic to split the WTs into a 1-1 relationship within the WOs. As the screenshot below shows, we have now a 1-n relationship between WO and WT:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_13.png" alt="SAP EWM WOCR UNDE and DEF_13" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_14.png" alt="SAP EWM WOCR UNDE and DEF_14" loading="lazy">
            </div>
            
            <p>Putaway done! When and how does the <code>DEF</code> rule behave in the context of stock removal?</p>
            
            <p><strong>STOCK REMOVAL</strong><br />Remember what the HTG told us</p>
            <p><em>[‚Ä¶]This means that all the warehouse tasks for one delivery are bundled together if they are in the same activity area</em></p>
            <p>Let‚Äôs try to find the logic behind!</p>
            <p>Without any WOCR for the given combination of activity area and activity we are ending up with the same FM calling the same subroutine with the same constant as we saw it in our example for the putaway task creation. Subroutine <code>wcr_default</code> is the one that makes sure that warehouse orders do only receive tasks from one combination of activity area, queue and delivery / reference document / warehouse request:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_15.png" alt="SAP EWM WOCR UNDE and DEF_15" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_16.png" alt="SAP EWM WOCR UNDE and DEF_16" loading="lazy">
            </div>
            
            <p>Not much more to see here to be honest. The result is as expected:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_17.png" alt="SAP EWM WOCR UNDE and DEF_17" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_18.png" alt="SAP EWM WOCR UNDE and DEF_18" loading="lazy">
            </div>
            
            <p><strong>Main takeaway? or What does that mean for you?</strong></p>
            <p>If you are working with warehouse requests (e.g. deliveries) and you do not have any specific requirement apart from</p>
            <ul>
                <li>creating one single warehouse order for all warehouse tasks of a single warehouse request</li>
                <li>which are removing stock from the same activity area</li>
                <li>and are assigned to the same queue</li>
            </ul>
            <p>‚Ä¶you do not have to configure a custom warehouse order creation rule for that but can keep it lean and work with the EWM standard default (<code>DEF</code>) rule.</p>
            <p>First part done. I think that was straightforward and easy to understand! Let us now have a look at the WOCR <code>UNDE</code>!</p>
            
            <h2>ANALYSING the WOCR ‚ÄòUNDE‚Äô</h2>
            <p>The HTG gave us the following information for this scenario:</p>
            <p><em>If a warehouse task doesn't fit to any warehouse order creation rule, it's bundled with the rule Undefined (<code>UNDE</code>), together with all the other warehouse tasks that don‚Äôt fit to any warehouse order creation rule.</em></p>
            <p>That is not a lot of details and as you can see further below, this is not 100% true. Anyways - we now want to analyse the behavior of the EWM standard in a situation where it indeed finds a WOCR for the given combination of activity area and activity but it cannot apply this rule (e.g. because the WTs did not pass the item filter).</p>
            <p>Same as before, we first have a look at putaway and internal movements, before we explore the stock removal.</p>
            
            <p><strong>PUTAWAY</strong><br />For this example I created a WOCR for the given activity area / activity but set the item filter in a way that our WTs would not pass it:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_19.png" alt="SAP EWM WOCR UNDE and DEF_19" loading="lazy">
            </div>
            
            <p>The relevant spot in the coding is the same as before where we ended up with rule <code>DEF</code>. Again, FM <code>/SCWM/WHO_PARALLEL_CREATE</code> tries to apply the WOCRs. In the scenario we are looking at now, it actually finds one WOCR for the given AA/activity (see internal table <code>lt_twcrsseq</code>):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_20.png" alt="SAP EWM WOCR UNDE and DEF_20" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_21.png" alt="SAP EWM WOCR UNDE and DEF_21" loading="lazy">
            </div>
            
            <p>Subroutine <code>who_wcr_apply</code> first tries to apply one of the WOCRs to the given WTs. As this fails, the FM proceeds with the ‚Äòspecial logic‚Äô, trying to apply <code>MFS</code> or <code>UNDE</code>). As our tasks are not relevant for a subsystem/MFS, the only option left is to hand over the constant for the rule <code>UNDE</code> to the subroutine <code>who_wcr_apply</code>, which then calls subroutine <code>wcr_undefined</code>:</p>
            <p>The comment in subroutine <code>wcr_undefined</code> gives us a better understanding about what to expect:</p>
<pre><code>* So-called "undefined" warehouse order creation rule that will be
* processed if all rules of a the activity area have been processed
* and there are still TOs, which were not bundled.
* This rule creates one bundle per dstgrp (in an activity area and
* queue).</code></pre>
            <p>@SAP Why can‚Äôt we have such details in the help text for the WOCR customizing? :-)</p>
            <p>Based on this we expect to end up with one WO for each combination of activity area, queue and distribution group. Note that in the context of putaway the term ‚Äòdistribution group‚Äô refers to the deconsolidation group which can be assigned to the bins based on the activity area (sitting in table <code>/SCWM/LAGPS</code>):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_22.png" alt="SAP EWM WOCR UNDE and DEF_22" loading="lazy">
            </div>
            
            <p>As expected, as a result of our test we end up with one WO which is created with WOCR <code>UNDE</code>, carrying all WTs for which EWM could not apply one of the WOCRs from customizing. Even HU WTs of type ‚Äòputaway‚Äô are now combined in one WO (which is different to what we saw with WOCR <code>DEF</code>):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_23.png" alt="SAP EWM WOCR UNDE and DEF_23" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_24.png" alt="SAP EWM WOCR UNDE and DEF_24" loading="lazy">
            </div>
            
            <p>Once I use different distribution groups for the different destination bins, the result looks like this (in the example I used one bin with and one without distribution group):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_25.png" alt="SAP EWM WOCR UNDE and DEF_25" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_26.png" alt="SAP EWM WOCR UNDE and DEF_26" loading="lazy">
            </div>
            
            <p>‚Ä¶this is the 1st point that I had in mind when I said the text in the how-to-guide is not 100% correct. As in fact, this is not happening: ‚Äúit's bundled with the rule Undefined (<code>UNDE</code>), together with all the other warehouse tasks that don‚Äôt fit to any warehouse order creation rule‚Äù.</p>
            <p>Note that EWM does not make a difference here between putaway or internal movements. No special rules apply based on the WPT category (like we saw before with the <code>DEF</code> rule).</p>
            
            <p><strong>STOCK REMOVAL</strong></p>
            <p>In a similar situation during stock removal, the call stack looks exactly the same. Subroutine <code>who_wcr_apply</code> fails to successfully apply one of the WOCRs to each of the given WTs and FM <code>/SCWM/WHO_PARALLEL_CREATE</code> proceeds with the ‚Äòspecial logic‚Äô (trying to apply WOCR <code>MFS</code> or <code>UNDE</code>).</p>
            <p>As our tasks are not relevant for a subsystem (rule <code>MFS</code>), the only option left is to hand over the constant for the rule <code>UNDE</code> to the subroutine <code>who_wcr_apply</code>, which then calls subroutine <code>wcr_undefined</code>. For stock removal we can find a split logic similar to the one that we saw for the putaway scenario above. Independent from the WOCR logic discussed here, EWM fills the distribution group field in the WT with the consolidation group of the warehouse request item. For us this also means that the WOCR <code>UNDE</code> will split by default based on this consolidation group for removal tasks (in the same way as it split based on the distribution group during putaway). In the context of stock removal the term ‚Äòdistribution group‚Äô refers to the consolidation group which can be assigned the warehouse request items.</p>
            <p>Example with a single consolidation group:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_27.png" alt="SAP EWM WOCR UNDE and DEF_27" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_28.png" alt="SAP EWM WOCR UNDE and DEF_28" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_29.png" alt="SAP EWM WOCR UNDE and DEF_29" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_30.png" alt="SAP EWM WOCR UNDE and DEF_30" loading="lazy">
            </div>
            
            <p>Example with two different consolidation groups:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_31.png" alt="SAP EWM WOCR UNDE and DEF_31" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_32.png" alt="SAP EWM WOCR UNDE and DEF_32" loading="lazy">
            </div>
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_33.png" alt="SAP EWM WOCR UNDE and DEF_33" loading="lazy">
            </div>
            
            <p>‚Ä¶this is the example that I had in mind when I wrote that the statement from the how-to-guide is not 100% true:</p>
            <p><em>If a warehouse task doesn't fit to any warehouse order creation rule, it's bundled with the rule Undefined (<code>UNDE</code>), together with (!!) all the other (!!) warehouse tasks that don‚Äôt fit to any warehouse order creation rule.</em></p>
            
            <h2>Summary</h2>
            <p>Unfortunately the help text included in the customizing does not help much here and also the functional books from the SAP press do only provide an absolute minimum of technical details. The HTG for WO enhancements gave us a good picture but again, a comprehensive understanding of how and why EWM applies the WOCRs <code>DEF</code> and <code>UNDE</code> could only be gathered based on a code-review.</p>
            <p>Key points that you should take away from this blog post:</p>
            <p>In case you do not define any WOCR at all for the given combination of activity area and activity, EWM applies the special rule <code>DEF</code></p>
            <ul>
                <li>For HU WTs created with a WPT of category ‚Äò1‚Äô (putaway), EWM creates a dedicated WO for each WT</li>
                <li>For product WTs or any other kind of WPT category, EWM creates one single WO for all such WTs in the given warehouse order creation run</li>
                <li>For stock removal WTs, EWM creates one WO per AA &amp; queue for each delivery</li>
            </ul>
            <p>In case you have defined WOCR(s) for the given combination of activity area and activity but the WTs cannot be processed by those WOCR(s) (e.g. do not pass the filters), EWM applies the special rule <code>UNDE</code></p>
            <ul>
                <li>In the context of putaway, separate WOs are created based on activity area, queue and the distribution group of the destination bin</li>
                <li>In the context of stock removal, separate WOs are created based on activity area, queue and the consolidation group of the corresponding warehouse request items</li>
            </ul>
            <p>For those of you who want to explore further details about the standard coding, the subroutine <code>who_wcr_apply</code> might be the most straightforward entry point:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/def-unde/SAP EWM WOCR UNDE and DEF_34.png" alt="SAP EWM WOCR UNDE and DEF_34" loading="lazy">
            </div>
            
            <p>This summary marks the end of this post. As usual, I hope I could add some value for some or the other.</p>
            <p>In any case, thanks for spending your time to read this stuff! Enjoy learning and visit my blog again from time to time!</p>

        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>üìß Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name (optional)">
                    <input type="text" name="LNAME" placeholder="Last name (optional)">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>‚ñ∂Ô∏è YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube">Subscribe on YouTube</a>
            </div>
        </div>

        <div class="freelancer-cta">
            <p><strong>Need EWM expertise within your project?</strong><br>
            WMexperts.online is a knowledge-sharing project of Hendrik, a Senior SAP EWM Freelancer.</p>
            <a href="#" class="btn-freelance">Explore my Freelance Profile ‚Üí</a>
        </div>
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer>&copy; 2026 WMexperts.online ‚Ä¢ Functional & Technical SAP EWM Expertise</footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

</body>
</html>