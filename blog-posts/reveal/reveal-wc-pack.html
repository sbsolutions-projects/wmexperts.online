<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="In-depth article about SAP EWM. Learn technical and functional details about Work center determination for a packing process.">
    <meta name="keywords" content="SAP EWM, Warehouse Management, Work center determination, packing process, POSC">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="../../assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Work center determination for a packing process | WMexperts">
    <meta property="og:description" content="In-depth article about SAP EWM. Learn technical and functional details about Work center determination for a packing process.">
    <meta property="article:published_time" content="2024-01-01">
    <meta property="article:modified_time" content="2024-01-01">

    <!-- Structured Data -->
    <script type="application/ld+json">
    [
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Work center determination for a packing process",
        "description": "In-depth article about SAP EWM. Learn technical and functional details about Work center determination for a packing process.",
        "image": "https://wmexperts.online/assets/images/placeholder.png",
        "datePublished": "2024-01-01",
        "dateModified": "2024-01-01",
        "author": {
          "@type": "Person",
          "name": "Hendrik"
        },
        "publisher": {
          "@type": "Organization",
          "name": "WMexperts",
          "logo": {
            "@type": "ImageObject",
            "url": "https://wmexperts.online/assets/logo.png"
          }
        }
      },
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://wmexperts.online/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "https://wmexperts.online/blog-posts/category/article-slug.html"
        }]
      }
    ]
    </script>

    <title>Work center determination for a packing process | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sap-blue: #005597;
            --bg-light: #F9FAFB;
            --text-dark: #111827;
            --text-muted: #4B5563;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.8;
        }

        /* --- NAVIGATION --- */
        header {
            background: #fff;
            padding: 1rem 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo { font-weight: 700; font-size: 1.5rem; color: var(--sap-blue); text-decoration: none; }
        .logo span { color: var(--sap-blue); }
        nav a { text-decoration: none; color: var(--text-muted); font-size: 0.9rem; font-weight: 600; }

        /* --- ARTICLE STRUCTURE --- */
        article { max-width: 800px; margin: 4rem auto; padding: 0 20px; }

        .breadcrumb {
            font-size: 0.75rem;
            color: var(--sap-blue);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.8rem; color: var(--text-dark); line-height: 1.2; margin-bottom: 1.5rem; letter-spacing: -1px; }

        /* --- RESPONSIVE VIDEO CONTAINER --- */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin: 2.5rem 0;
            border-radius: 12px;
            background: #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .content p { margin-bottom: 0.75rem; font-size: 1.1rem; }
        .content h2 { color: var(--text-dark); margin-top: 1.75rem; font-size: 1.8rem; border-bottom: 2px solid var(--bg-light); padding-bottom: 0.5rem; }
        .content ul, .content ol { padding-left: 1.5rem; margin-bottom: 2rem; }
        .content li { margin-bottom: 0.75rem; font-size: 1.05rem; }

        /* --- TECHNICAL & IMAGE BLOCKS --- */
        .screenshot-container { margin: 1.75rem 0; text-align: center; }
        
        .screenshot-container img {
            max-width: 66.67%;
            height: auto;
            display: block;
            margin: 0 auto;
            background-color: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: zoom-in;
            transition: transform 0.2s ease;
        }

        .screenshot-container img:hover { transform: scale(1.01); }

        pre {
            background: #F3F4F6;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--sap-blue);
            margin: 2rem 0;
            color: var(--text-dark);
        }

        code {
            font-family: 'Courier New', monospace;
            background: #EEF2F6;
            color: var(--sap-blue);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.95em;
            font-weight: 500;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            font-weight: normal;
        }

        /* --- ENHANCED LIGHTBOX (ZOOM) STYLING --- */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            cursor: zoom-out;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        #lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease;
        }

        #lightbox img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            cursor: default;
        }

        /* Lightbox Controls */
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #ffffff;
            cursor: pointer;
            z-index: 10000;
            transition: transform 0.2s ease;
            font-weight: 300;
            line-height: 1;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            transform: rotate(90deg);
        }

        .lightbox-prev,
        .lightbox-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: #ffffff;
            cursor: pointer;
            padding: 20px;
            transition: opacity 0.2s ease;
            user-select: none;
            z-index: 10000;
        }

        .lightbox-prev:hover,
        .lightbox-next:hover {
            opacity: 0.7;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .lightbox-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 10000;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Prevent body scroll when lightbox is open */
        body.lightbox-open {
            overflow: hidden;
        }

        /* --- STAY UPDATED SECTION --- */
        .stay-updated {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .stay-updated-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stay-updated-card h3 {
            color: var(--text-dark);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stay-updated-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .newsletter-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .newsletter-form input {
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--sap-blue);
            box-shadow: 0 0 0 3px rgba(0, 85, 151, 0.1);
        }

        .btn-subscribe {
            padding: 10px 20px;
            background: var(--sap-blue);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-subscribe:hover {
            background: var(--sap-blue-light);
        }

        .btn-youtube {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 12px 24px;
            background: #ff0000;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s ease;
            width: fit-content;
            margin-top: auto;
        }

        .btn-youtube:hover {
            background: #cc0000;
        }

        @media (max-width: 768px) {
            .stay-updated {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* --- FOOTER & CTA --- */
        .freelancer-cta {
            margin-top: 6rem;
            padding: 3rem;
            background: var(--bg-light);
            border-radius: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .btn-freelance {
            display: inline-block;
            background: var(--sap-blue);
            color: #fff;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 1rem;
            transition: background 0.2s ease;
        }

        .btn-freelance:hover {
            background: #004276;
        }

        footer { padding: 4rem 10%; text-align: center; font-size: 0.85rem; color: #9CA3AF; border-top: 1px solid var(--border); }
    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="logo" target="_blank">WM<span style="color: var(--text-dark);">experts.online</span></a>
        <nav><a href="../../index.html" target="_blank">← Back to Blog</a></nav>
    </header>

    <article>
        <div class="breadcrumb">Reveal SAP EWM</div>
        <h1>Work center determination for a packing process</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube-nocookie.com/embed/IQaWR85Jr4k" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p>This blog reveals the logic for destination bin / work center determination for a packing step as part of an outbound storage process. You might want to think “<i>Yeah – I know – there is this determination table which we can use here</i>”. This is correct, but there is more to it. As usual, I do promise to give you some technical details and toppings that you will not find in any of the SAP books or system help text!</p>
            <p>As mentioned above, the scope of this blog is limited to packing steps which are executed in the context of outbound processes. This is mainly because a rules-based determination via the <code>POSC</code> is not possible during the inbound process, which makes it a bit boring ;-).</p>
            <p>Sidenote: In order to execute system-supported packing during an outbound process you need to make use of the <code>POSC</code> meaning you have to use a storage process with a packing step:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_01.png" alt="SAP EWM work center determination for packing_01" loading="lazy">
            </div>
            
            <p>Of course you can create HUs also during picking without a packing step but we are focusing here on packing steps which are executed separately from the picking process at dedicated packing work centers.</p>
            
            <h2><strong>Agenda</strong></h2>
            <ul>
                <li>Options for packing bin / work center determination</li>
                <li>Rules-based vs. non-rules-based determination</li>
                <li>Deep-dive into the different options</li>
                <li>Consideration of the putaway strategy</li>
                <li>Options for enhancements</li>
            </ul>
            
            <h2><strong>Options for packing bin / work center determination</strong></h2>
            <p>In general, we do have three options for the destination bin determination here. We can determine the packing bin / work center</p>
            <ol>
                <li>based on type/section/bin in the given storage process step</li>
                <li>based on the corresponding warehouse order creation rule (WOCR)</li>
                <li>based on the determination table</li>
            </ol>
            
            <h2><strong>Rules-based vs. non-rules-based determination</strong></h2>
            <p>We can separate those three options into rules-based and non-rules-based ones. Option (2) and (3) are rules-based and only relevant in case the corresponding flag is active for the packing step of the given storage process:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_02.png" alt="SAP EWM work center determination for packing_02" loading="lazy">
            </div>
            
            <h2><strong>Deep-dive into the different options</strong></h2>
            <p>Option (1) is the easy one, which is relevant in case the rules-based flag is not active for the given process step. In this case EWM will just read the ‘fixed’ type/section/bin that you provide in the process step customizing:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_03_2.png" alt="SAP EWM work center determination for packing_03_2" loading="lazy">
            </div>
            
            <p>That is all you need to know for the non-rules-based logic. Let us now have a look at the logic for rules-based work center determination!</p>
            <p>In general (there are some exceptions), the ‘Rules-based’ flags will determine the destination which is needed to complete the previous step of the storage process (so e.g. a record with step <code>OB02</code> will set the destination for step <code>OB01</code>):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_04.png" alt="SAP EWM work center determination for packing_04" loading="lazy">
            </div>
            
            <p>Function module <code>/SCWM/STORAGE_CONTROL_P_GET</code> is the most important player here. It calls the destination bin determination for the different kind of internal steps. For packing steps EWM determines the destination for the previous step (usually a picking step) via FM <code>/SCWM/DET_PACKING_STATION</code>.</p>
            <p>This FM first checks whether you gave a fixed destination via the warehouse order creation rule (this is option (2), mentioned above):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_05.png" alt="SAP EWM work center determination for packing_05" loading="lazy">
            </div>
            
            <p>Fun fact – you notice the comment with the ‘bundling rule’ in the screenshot above. Never heard that before as a synonym for a warehouse order creation rule but at least for a business user it is probably a more meaningful/helpful term.</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_06.png" alt="SAP EWM work center determination for packing_06" loading="lazy">
            </div>
            
            <p>If it finds something, we are already done here. If it does not find something (~ fields are empty in the WOCR), it reads the work center determination table <code>/SCWM/TPACKSTDT</code> via FM <code>/SCWM/TPACKSTDT_READ_SINGLE</code>. Note that you can maintain records in this table via the easy access menu or directly call transaction <code>/SCWM/PACKSTDT</code>:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_08.png" alt="SAP EWM work center determination for packing_08" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_07.png" alt="SAP EWM work center determination for packing_07" loading="lazy">
            </div>
            
            <p>The FM first tries to read a record with the full key (route + activity area + consolidation group) before it applies the access sequence which you can define in customizing:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_09.png" alt="SAP EWM work center determination for packing_09" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_10.png" alt="SAP EWM work center determination for packing_10" loading="lazy">
            </div>
            
            <p>…and that’s it already. It is not foreseen to skip this step based on the rules-based flag. That means in case the rules-based flag is active and EWM neither finds a destination based on the 2 options described above (neither via the WOCR, nor in the work center determination table), you will receive an error message during warehouse task creation:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_11.png" alt="SAP EWM work center determination for packing_11" loading="lazy">
            </div>
            
            <p>That also means that EWM will not consider the destination data from the process step in case the rules-based flag is active but the destination data is maintained (e.g. like in the screenshot below). Actually EWM will not even allow to save such a setup:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_14.png" alt="SAP EWM work center determination for packing_14" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_13.png" alt="SAP EWM work center determination for packing_13" loading="lazy">
            </div>
            
            <h2><strong>Sidenote - Consideration of the putaway strategy</strong></h2>
            <p>Note that for any of the three options described here it is possible to provide only the destination storage type but leave the storage section and/or bin empty. In this case, EWM will determine the actual bin via FM <code>/SCWM/PUT_BIN_DSTGRP</code>. However, this will only return anything, in case you are using putaway rule ‘3’ (consolidation group) for your work center storage type:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/wc-det-pack/SAP EWM work center determination for packing_12.png" alt="SAP EWM work center determination for packing_12" loading="lazy">
            </div>
            
            <h2><strong>Options for enhancements</strong></h2>
            <p>As usual, I close my blog by giving you some ideas and options that you can use to implement a custom logic.<br />In case what I described above is not sufficient to cover your requirements, you can add your own packing station determination rule here via BAdI <code>/SCWM/EX_WRKC_PACKDET</code> (Called at the end of FM <code>/SCWM/DET_PACKING_STATION</code>).<br />A second option is sitting at the end of the FM <code>/SCWM/STORAGE_CONTROL_P_GET</code>, where EWM calls BAdI <code>/SCWM/EX_CORE_PSC_PROCESS</code> which can be used to implement your very own rules-based determination of the destination data for any of the given <code>POSC</code> steps.</p>
            
            <h2><strong>Closure</strong></h2>
            <p>As a resume I think we can agree that the work center or packing bin determination is very flexible but at the and not complex at all. I hope that I could explain and visualize everything in a way that it helps you within your current or any future projects!</p>

        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>📧 Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name (optional)">
                    <input type="text" name="LNAME" placeholder="Last name (optional)">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>▶️ YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube" >Subscribe on YouTube</a>
            </div>
        </div>

        <div class="freelancer-cta">
            <p><strong>Need EWM expertise within your project?</strong><br>
            WMexperts.online is a knowledge-sharing project of Hendrik, a Senior SAP EWM Freelancer.</p>
            <a href="#" class="btn-freelance" target="_blank">Explore my Freelance Profile →</a>
        </div>
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer>&copy; 2026 WMexperts.online • Functional & Technical SAP EWM Expertise</footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

</body>
</html>




