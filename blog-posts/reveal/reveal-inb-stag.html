<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="In-depth article about SAP EWM. Learn technical and functional details about Inbound staging bin determination.">
    <meta name="keywords" content="SAP EWM, Warehouse Management, Inbound staging bin determination, POSC">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Inbound staging bin determination | WMexperts">
    <meta property="og:description" content="In-depth article about SAP EWM. Learn technical and functional details about Inbound staging bin determination.">
    <meta property="article:published_time" content="2024-01-06">
    <meta property="article:modified_time" content="2024-01-06">

    <!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "Inbound staging bin determination",
  "description": "In-depth article about SAP EWM. Learn technical and functional details about Inbound staging bin determination.",
  "image": "../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_01.png",
  "datePublished": "2024-01-06T00:00:00Z",
  "dateModified": "2024-01-06T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "Hendrik"
  },
  "publisher": {
    "@type": "Organization",
    "name": "WMexperts",
    "logo": {
      "@type": "ImageObject",
      "url": "https://wmexperts.online/assets/favicon/favicon-32x32.png"
    }
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://wmexperts.online/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Reveal SAP EWM",
      "item": "https://wmexperts.online/blog-posts/reveal/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Inbound staging bin determination",
      "item": "https://wmexperts.online/blog-posts/reveal/reveal-inb-stag.html"
    }
  ]
}
</script>

    <title>Inbound staging bin determination | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

    <header id="main-header"></header>

    <article>
        <div class="breadcrumb">Reveal SAP EWM</div>
        <h1>Inbound staging bin determination</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube-nocookie.com/embed/5NiLD3g_SPw" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p>This blog reveals the logic for staging bin determination step as part of an inbound unloading storage process step. Having said that, it should be obvious that we are looking into inbound processes using the process-oriented storage control in order to model the physical flow &amp; steps. In this context we will also cover the staging bin determination for delivery items in general. So even if you are not using the POSC, this article provides everything you need to know about this topic.</p>
            <p>The blog is separated into the following sections:</p>
            <ul>
                <li>Rules-based vs. non-rules-based staging bin determination</li>
                <li>Deep-dive into the logic</li>
                <li>Option for enhancements</li>
            </ul>
            <p>Let us start with looking into the differentiation between a rules-based and a non-rules-based determination, while using the process-oriented storage control.</p>
            <p>The standard help text is very – let’s say ‘lean’ here:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_01.png" alt="SAP EWM Inbound staging bin determination_01" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_02.png" alt="SAP EWM Inbound staging bin determination_02" loading="lazy">
            </div>
            
            <p>Honestly – that help text here does not help at all. At least not when you are just starting your EWM journey. The web-help (help.sap.com) does also not offer anything helpful here (at least not at the time of writing this blog post). Minimal information in the SAP Press Books about EWM and nothing in the OSS.</p>
            <p>In general, the ‘Rule-based’ flags are used to trigger logic which is used to determine the destination which is needed to complete the <u>previous</u> step (so e.g. a record with <code>OB02</code> will set the destination for step <code>OB01</code>). It replaces the rather fixed, pre-given destination (storage types, storage sections and storage bins) that you can maintain in each external step.</p>
            <p>The inbound staging bin determination logic in the context of the POSC is only relevant for <u>unloading</u> steps though. This also means, that the rules-based flag helps us here to find the destination bin for <u>the actual (the <em>unloading</em>) step</u> (this is kind of unique – as mentioned above, for most of the other steps we are actually determining the destination data for the <u>previous</u> step).</p>
            <p>Note that I highlighted the ‘unloading step’ here. This is important to understand. If we want to determine the staging bin via the POSC, we need to do this via an unloading step (not via a ‘staging’ step like one could think in the first place – the latter is only used during the outbound process)!</p>
            <p>Within this blog post, we will first look into the non-rules-based logic, before we close with the non-rules-based one.</p>
            <p>Non-rules-based is pretty straightforward -</p>
            <p>EWM simply reads the destination bin from the customizing of the POSC step itself. That’s it. No determination logic. No determination table:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_03.png" alt="SAP EWM Inbound staging bin determination_03" loading="lazy">
            </div>
            
            <p>So let us focus on the rules-based option, which is much more interesting!</p>
            <p>What the bin determination for all POSC steps has in common, is the spot in the code where the respective logic is being called. Function module <code>/SCWM/STORAGE_CONTROL_P_GET</code> is the most important player here. For the inbound unloading / staging process, it reads the staging data, which should have been set already ahead of the POSC actually being executed (so ahead of unloading the HUs). The staging data is read via FM <code>/SCWM/GET_STAGING_AREA_INT</code>, which will then return the <u>destination bin for the unloading step</u>:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_04.png" alt="SAP EWM Inbound staging bin determination_04" loading="lazy">
            </div>
            
            <p>The FM reads the staging area for items of the given handling unit. It first (1) tries to get it from the delivery items where the HU items are referring to:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_05.png" alt="SAP EWM Inbound staging bin determination_05" loading="lazy">
            </div>
            
            <p>Pretty easy, but how did EWM actually fill those fields on delivery item level?</p>
            <p>As this is not happening within the POSC coding itself, we are now leaving the POSC for a quick excurse. The logic that I explain now is independent from whether you are later using the POSC for the inbound process or not. This is purely about the staging data determination for the delivery item. We will come back to the POSC context later again.</p>
            <p>The <u>trigger</u> for the staging data determination for the delivery item is sitting here:</p>
            <p><code>/SCWM/CL_AF_SR_CONFIG-/SCWM/IF_AF_SR_CONFIG~DETERMINE_STAGING_AREA_INB</code></p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_06.png" alt="SAP EWM Inbound staging bin determination_06" loading="lazy">
            </div>
            
            <p>But the whole <u>logic</u> is sitting inside of method <code>/SCWM/CL_AF_SR_CONFIG-DETERMINE_STAREA_INB</code>, which is called from the one mentioned before.</p>
            <p>Let us go through that one step-by-step:</p>
            <p>First this method makes use of method <code>SELECT_STAREA_DET</code> to read the application data:</p>
            <ol>
                <li>Read all records from the staging area determination table for the given warehouse number (filled via transaction <code>/SCWM/STADET_IN</code>)</li>
            </ol>
            <p>Read all records from the staging area access sequence for the given warehouse number (filled via transaction <code>/SCWM/STADET_ASS</code>)</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_07.png" alt="SAP EWM Inbound staging bin determination_07" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_08.png" alt="SAP EWM Inbound staging bin determination_08" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_09.png" alt="SAP EWM Inbound staging bin determination_09" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_10.png" alt="SAP EWM Inbound staging bin determination_10" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_11.png" alt="SAP EWM Inbound staging bin determination_11" loading="lazy">
            </div>
            
            <p>This selected data is returned to method <code>DETERMINE_STAREA_INB</code> in order to evaluate the determination table records based on the access sequence and then return the result / match.</p>
            <p>Important notes (~ some – incl. myself - call it ‘party knowledge’ (I understand if you now imagine a very nerdy party ;-) )):</p>
            <ul>
                <li>The access sequence table is used for inbound as well as outbound processes and not all fields of the table are relevant for the staging bin determination in the context of the <u>inbound</u> process (green vs. red)</li>
            </ul>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_12.png" alt="SAP EWM Inbound staging bin determination_12" loading="lazy">
            </div>
            
            <ul>
                <li>The Door field is the only one which is <u>not</u> mandatory (~ does not have to be filled in the delivery item) even if you set the door flag for all records of the access sequence (at the end, EWM will <u>always</u> try to find a record without considering the door value &gt; no door access after the ELSE statement in the screenshot below)</li>
            </ul>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_13.png" alt="SAP EWM Inbound staging bin determination_13" loading="lazy">
            </div>
            
            <p>That’s it. Pretty simple. No surprises! We know now where the data is coming from. Finished our short excurse about the staging data determination for the inbound delivery items.</p>
            <p>Back to the POSC and back to the FM that started the determination process (<code>/SCWM/GET_STAGING_AREA_INT</code>) and which original task was to handover the staging data to the POSC determination logic. In case is <u>not</u> possible for this FM to get the data from the warehouse request (~ the fields in the delivery item are empty), it tries to get it from the <u>transportation unit</u> (2):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_14.png" alt="SAP EWM Inbound staging bin determination_14" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_15.png" alt="SAP EWM Inbound staging bin determination_15" loading="lazy">
            </div>
            
            <p>So let us try to explore where and how EWM determines the data from the transportation unit.</p>
            <p>Method <code>/SCWM/CL_SR_MY_SERVICE-GET_DLV_DOOR_BY_TU</code> first tries to determine the relevant TU based on the <u>HU item data</u> (remember we are analyzing the task creation in the context of the process-oriented storage control here &gt; thus, we are always trying to create a task for a HU, during runtime of the code that you see here).</p>
            <p>Once it has determined the assigned TU, it reads the <u>door assignments</u> to this TU, which are matching the <u>planned times for the start/end of the unloading process</u> (ignoring all door assignments where the time window either stops before the planned unloading start or where the time window starts only after the planned unloading end):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_16.png" alt="SAP EWM Inbound staging bin determination_16" loading="lazy">
            </div>
            
            <p>If EWM finds exactly one door within the allowed time window for unloading, it proceeds with the staging bin determination via method <code>/SCWM/CL_SR_CONFIG-STAGE_AREA_DET_IN</code>:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_17.png" alt="SAP EWM Inbound staging bin determination_17" loading="lazy">
            </div>
            
            <p>From within this method we call method <code>/SCWM/CL_SR_CONFIG-GET_STADET_IN</code>, which is doing the exact same thing as method <code>/SCWM/CL_AF_SR_CONFIG-DETERMINE_STAREA_INB</code> did for the inbound delivery item before. It reads the determination table and the access sequence records and then compares those with the data collected from the transportation unit (also considering the door that was determined for the planned unloading time window (described above)):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_18.png" alt="SAP EWM Inbound staging bin determination_18" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_19.png" alt="SAP EWM Inbound staging bin determination_19" loading="lazy">
            </div>
            
            <p>The result of this method is than carried back to function module <code>/SCWM/GET_STAGING_AREA_INT</code>, which then returns the data back to our well-known POSC FM <code>/SCWM/STORAGE_CONTROL_P_GET</code> which kicked-off the determination initially, in order to get the destination for the unloading step of our storage process.</p>
            <p>That’s it. You do know have (or have not) staging data which has been determined in a rules-based approach, either based on the delivery item or based on the transportation unit.</p>
            <p>It is important to understand that it is <u>not</u> foreseen to skip the unloading step entirely (like e.g. steps for quality inspection or deconsolidation during the inbound process). So in case you decided for the rules-based logic and the staging bin determination described above does <u>not</u> return a valid bin, EWM will give you an error message instead of skipping the step!</p>
            <p>As usual, I will close this post listing some options for you the enhance the EWM standard logic here.</p>
            
            <strong>Options for enhancements</strong>
            <p>Badi for staging bin determination of delivery items: <code>/SCWM/EX_SR_STADET</code></p>
            <p>This Badi is called at the end of method <code>/SCWM/CL_AF_SR_CONFIG-/SCWM/IF_AF_SR_CONFIG~DETERMINE_STAGING_AREA_INB</code> (so after the standard bin determination for the delivery item has been processed) and also at the end of method <code>/SCWM/CL_SR_CONFIG-STAGE_AREA_DET_IN</code> (so after the standard bin determination based on the TU has been processed):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_20.png" alt="SAP EWM Inbound staging bin determination_20" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_21.png" alt="SAP EWM Inbound staging bin determination_21" loading="lazy">
            </div>
            
            <p>Badi to determine destination bin for storage process step: <code>/SCWM/EX_CORE_PSC_PROCESS</code></p>
            <p>At the end of the FM <code>/SCWM/STORAGE_CONTROL_P_GET</code>, EWM calls this Badi, which can be used to implement your very own rules-based determination of the destination data for the given POSC step (this one is independent of the step type itself)</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/reveal/inb-stage/SAP EWM Inbound staging bin determination_22.png" alt="SAP EWM Inbound staging bin determination_22" loading="lazy">
            </div>
            
            <p><em>Based on this article you should have a good understanding of the staging data determination for delivery items. On top of this, you know now how this data is being evaluated in the context of the process-oriented storage control and which additional options you have here, while using the POSC (non-rules-based with fixed data in the POSC step or rules-based considering the delivery item &amp; TU data).</em></p>

        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>📧 Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name">
                    <input type="text" name="LNAME" placeholder="Last name">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>▶️ YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube" >Subscribe on YouTube</a>
            </div>
        </div>

        <!-- FREELANCER CTA (Commented out - to be launched later)
        <section class="freelancer-cta" aria-labelledby="cta-heading">
            <h2 id="cta-heading">Need Support around SAP EWM?</h2>
            <p>WMexperts.online is the knowledge hub of Hendrik, a Senior SAP EWM Consultant with expertise in functional design, technical implementation, and project leadership.</p>
            <a href="#" class="btn-primary">Explore My Offerings →</a>
        </section>
        -->
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer id="main-footer"></footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

    <script>
    // Load global components
    fetch('/header-content.html').then(res => res.text()).then(html => document.getElementById('main-header').innerHTML = html);
    fetch('/footer-content.html').then(res => res.text()).then(html => document.getElementById('main-footer').innerHTML = html);
    </script>

</body>
</html>






