<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SAP EWM standard logic for rearranging HUs in multi-depth storage bins, essential for automated warehouses with MFS.">
    <meta name="keywords" content="SAP EWM, Warehouse Management, MFS, Multi-depth storage, Rearrangement, Automation, /SCWM/EX_MFS_MD_REARR_HU">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Rearrange HUs in multi-depth storage bins | WMexperts">
    <meta property="og:description" content="SAP EWM standard logic for rearranging HUs in multi-depth storage bins, essential for automated warehouses with MFS.">
    <meta property="article:published_time" content="2024-01-01">
    <meta property="article:modified_time" content="2024-01-01">

    <!-- Structured Data -->
    <script type="application/ld+json">
    [
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Rearrange HUs in multi-depth storage bins",
        "description": "SAP EWM standard logic for rearranging HUs in multi-depth storage bins, essential for automated warehouses with MFS.",
        "image": "https://wmexperts.online/assets/images/placeholder.png",
        "datePublished": "2024-01-01",
        "dateModified": "2024-01-01",
        "author": {
          "@type": "Person",
          "name": "Hendrik"
        },
        "publisher": {
          "@type": "Organization",
          "name": "WMexperts",
          "logo": {
            "@type": "ImageObject",
            "url": "https://wmexperts.online/assets/logo.png"
          }
        }
      },
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://wmexperts.online/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "https://wmexperts.online/blog-posts/category/sap-ewm-mfs.html"
        }]
      }
    ]
    </script>

    <title>Rearrange HUs in multi-depth storage bins | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sap-blue: #005597;
            --bg-light: #F9FAFB;
            --text-dark: #111827;
            --text-muted: #4B5563;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.8;
        }

        /* --- NAVIGATION --- */
        header {
            background: #fff;
            padding: 1rem 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo { font-weight: 600; font-size: 1.4rem; color: var(--text-dark); text-decoration: none; }
        .logo span { color: var(--sap-blue); }
        nav a { text-decoration: none; color: var(--text-muted); font-size: 0.9rem; font-weight: 600; }

        /* --- ARTICLE STRUCTURE --- */
        article { max-width: 800px; margin: 4rem auto; padding: 0 20px; }

        .breadcrumb {
            font-size: 0.75rem;
            color: var(--sap-blue);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.8rem; color: var(--text-dark); line-height: 1.2; margin-bottom: 1.5rem; letter-spacing: -1px; }

        /* --- RESPONSIVE VIDEO CONTAINER --- */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin: 2.5rem 0;
            border-radius: 12px;
            background: #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .content p { margin-bottom: 0.75rem; font-size: 1.1rem; }
        .content h2 { color: var(--text-dark); margin-top: 1.75rem; font-size: 1.8rem; border-bottom: 2px solid var(--bg-light); padding-bottom: 0.5rem; }
        .content ul { padding-left: 1.5rem; margin-bottom: 2rem; }
        .content li { margin-bottom: 0.75rem; font-size: 1.05rem; }

        /* --- TECHNICAL & IMAGE BLOCKS --- */
        .screenshot-container { margin: 1.75rem 0; text-align: center; }
        
        .screenshot-container img {
            max-width: 66.67%;
            height: auto;
            display: block;
            margin: 0 auto;
            background-color: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: zoom-in;
            transition: transform 0.2s ease;
        }

        .screenshot-container img:hover { transform: scale(1.01); }

        pre {
            background: #F3F4F6;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--sap-blue);
            margin: 2rem 0;
            color: var(--text-dark);
        }

        code {
            font-family: 'Courier New', monospace;
            background: #EEF2F6;
            color: var(--sap-blue);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.95em;
            font-weight: 500;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            font-weight: normal;
        }

        /* --- ENHANCED LIGHTBOX (ZOOM) STYLING --- */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            cursor: zoom-out;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        #lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease;
        }

        #lightbox img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            cursor: default;
        }

        /* Lightbox Controls */
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #ffffff;
            cursor: pointer;
            z-index: 10000;
            transition: transform 0.2s ease;
            font-weight: 300;
            line-height: 1;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            transform: rotate(90deg);
        }

        .lightbox-prev,
        .lightbox-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: #ffffff;
            cursor: pointer;
            padding: 20px;
            transition: opacity 0.2s ease;
            user-select: none;
            z-index: 10000;
        }

        .lightbox-prev:hover,
        .lightbox-next:hover {
            opacity: 0.7;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .lightbox-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 10000;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Prevent body scroll when lightbox is open */
        body.lightbox-open {
            overflow: hidden;
        }

        /* --- STAY UPDATED SECTION --- */
        .stay-updated {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .stay-updated-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stay-updated-card h3 {
            color: var(--text-dark);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stay-updated-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .newsletter-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .newsletter-form input {
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--sap-blue);
            box-shadow: 0 0 0 3px rgba(0, 85, 151, 0.1);
        }

        .btn-subscribe {
            padding: 10px 20px;
            background: var(--sap-blue);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-subscribe:hover {
            background: var(--sap-blue-light);
        }

        .btn-youtube {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 12px 24px;
            background: #ff0000;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s ease;
            width: fit-content;
            margin-top: auto;
        }

        .btn-youtube:hover {
            background: #cc0000;
        }

        @media (max-width: 768px) {
            .stay-updated {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* --- FOOTER & CTA --- */
        .freelancer-cta {
            margin-top: 6rem;
            padding: 3rem;
            background: var(--bg-light);
            border-radius: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .btn-freelance {
            display: inline-block;
            background: var(--sap-blue);
            color: #fff;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 1rem;
            transition: background 0.2s ease;
        }

        .btn-freelance:hover {
            background: #004276;
        }

        footer { padding: 4rem 10%; text-align: center; font-size: 0.85rem; color: #9CA3AF; border-top: 1px solid var(--border); }
    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="logo">WM<span>experts</span></a>
        <nav><a href="../../index.html">‚Üê Back to Blog</a></nav>
    </header>

    <article>
        <div class="breadcrumb">Discover SAP EWM MFS</div>
        <h1>Rearrange HUs in multi-depth storage bins</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube-nocookie.com/embed/l1_WUIT3ehs" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p><strong>Note</strong>: This blog is part of the series ‚Äò<em>SAP EWM meets Automation</em>‚Äô and shows an EWM standard logic which is rarely mentioned in any of the EWM books and documentations but tackles a process which is essential in automated warehouses with SAP EWM MFS multi-depth storage bins.</p>
            <p>The content provided here has been created in cooperation with the SAP EWM team at Swisslog. Feel free to visit their <a href="https://www.swisslog.com/en-us/products-systems-solutions/software-inventory-management/sap-ewm-extended-warehouse-management" target="_blank" rel="noopener noreferrer">website</a> in case you want to learn more about EWM @ Swisslog!</p>
            <p>Note that you need to have a rough understanding of the MFS component as well as some basic ABAP knowledge in order to understand the content of this article.</p>
            <p><strong>What is the problem we are looking at?</strong></p>
            <p>Multi-depth storage can be used to save space in automated storage types. It results in fewer working aisles and resources and a higher storage density. Multi-depth storage bins can contain multiple handling units (HUs) stored horizontally behind each other.</p>
            
            <div class="screenshot-container">
                <img width="689" height="390" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 1.png" alt="SAP EWM MFS rearrange multi-depth 1" loading="lazy">
            </div>
            
            <p>Usually, goods are retrieved following the LIFO (last in, first out) principle but this cannot always be ensured (e.g. in warehouses with the necessity to store HUs with different products on the same multi-depth bin or in case different strategies are used as part of the picking rules). In such a situation it might become necessary to rearrange the HU on the front position in order to access the HU on the back position (the back storage bin always has the highest bin depth ‚Äì here ‚Äò02‚Äô - and will be filled first).<br />In this example here, pallet A is on position 02 and pallet B is on position 01. We created a warehouse task and want to retrieve pallet A.</p>
            
            <div class="screenshot-container">
                <img width="511" height="349" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 2.png" alt="SAP EWM MFS rearrange multi-depth 2" loading="lazy">
            </div>
            
            <p>In order to achieve this we need to rearrange pallet B at first. Based on the status of HU B we do have two options in EWM standard here:<br>- Rearrange pallet B (in case pallet B does not have a HU WT already, we can move it to another free bin)<br>- Remove pallet B from stock (in case pallet B does already have a HU WT we cannot create a new one but have to process the existing one)</p>
            
            <div class="screenshot-container">
                <img width="502" height="317" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 3.png" alt="SAP EWM MFS rearrange multi-depth 3" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="551" height="318" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 4.png" alt="SAP EWM MFS rearrange multi-depth 4" loading="lazy">
            </div>
            
            <p>This sounds straightforward but it has some hiccups and specialties. Let us have a look at the details.</p>
            <p><strong>Customizing prerequisites</strong></p>
            <p>The following settings are needed on storage type level in order to work with multi-depth bins:</p>
            
            <div class="screenshot-container">
                <img width="936" height="327" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 5.png" alt="SAP EWM MFS rearrange multi-depth 5" loading="lazy">
            </div>
            
            <p>In addition to this, you need to define the bin depth of the bin types and the required depth of the HU types:</p>
            <p>Once done, the logical position will be visible in the stock/HUs of this storage type as well as in the warehouse tasks to move stock into or out of this type:</p>
            
            <div class="screenshot-container">
                <img width="705" height="515" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 6.png" alt="SAP EWM MFS rearrange multi-depth 6" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="303" height="343" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 7.png" alt="SAP EWM MFS rearrange multi-depth 7" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="282" height="182" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 8.png" alt="SAP EWM MFS rearrange multi-depth 8" loading="lazy">
            </div>
            
            <p><strong>Where do we find the standard logic?</strong></p>
            <p>Badi <code>/SCWM/EX_MFS_MD_REARR_HU</code> with fallback class <code>/SCWM/CL_EI_MFS_MD_REARR_HU</code> is called from include <code>/SCWM/LMFS_MAINF06</code>, subroutine <code>call_badi_multi_deep</code>:</p>
            
            <div class="screenshot-container">
                <img width="936" height="522" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 9.png" alt="SAP EWM MFS rearrange multi-depth 9" loading="lazy">
            </div>
            
            <p>Standard will try to rearrange here in the context of determining the next WO/WT to be processed by the subsystem:</p>
            
            <div class="screenshot-container">
                <img width="688" height="272" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 10.png" alt="SAP EWM MFS rearrange multi-depth 10" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="936" height="422" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 11.png" alt="SAP EWM MFS rearrange multi-depth 11" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="936" height="399" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 12.png" alt="SAP EWM MFS rearrange multi-depth 12" loading="lazy">
            </div>
            
            <p>1st step: method <code>check_hu_in_bin</code></p>
            <p>2nd step: method <code>transfer_hu</code></p>
            
            <div class="screenshot-container">
                <img width="936" height="535" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 13.png" alt="SAP EWM MFS rearrange multi-depth 13" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="846" height="569" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 14.png" alt="SAP EWM MFS rearrange multi-depth 14" loading="lazy">
            </div>
            
            <p>‚Ä¶that is the basic structure. Now let us have a deeper look into the standard logic!</p>
            <p><strong>Content/logic of the standard strategy</strong></p>
            <p>Precondition for method <code>check_hu_on_bin</code> to be called is<br />- The next WO/WT to be processed was selected via standard or custom logic (Badi <code>/SCWM/EX_MFS_WO_DET2</code>)<br />- The source storage type of the selected WT is setup for multi-depth storage</p>
            <p>The method checks whether the source storage bin of the WT can hold more than one HU and if yes, select all HUs physically on the bin.<br />Then we</p>
            <p>1. Sort all HUs by the logical position (as mentioned above, position 1 is always the front position)<br />2. If the pallet on position 1 is equal to the pallet of the WT to be processed (~ iv_huident) we do not need to do anything &gt; EXIT<br />3. If the pallet on position 1 is different than the pallet in the WT, it needs to be rearranged</p>
            
            <div class="screenshot-container">
                <img width="936" height="546" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 15.png" alt="SAP EWM MFS rearrange multi-depth 15" loading="lazy">
            </div>
            
            <p>The table with the HU(s) (in the standard implementation always one HU only) is handed over to the calling method. Taking this as an input, we call method <code>transfer_hu</code>:</p>
            
            <div class="screenshot-container">
                <img width="910" height="495" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 16.png" alt="SAP EWM MFS rearrange multi-depth 16" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="887" height="640" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 17.png" alt="SAP EWM MFS rearrange multi-depth 17" loading="lazy">
            </div>
            
            <p>Here we first read the warehouse process type for rearrangement from the PLC customizing:</p>
            
            <div class="screenshot-container">
                <img width="666" height="429" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 19.png" alt="SAP EWM MFS rearrange multi-depth 19" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="936" height="517" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 20.png" alt="SAP EWM MFS rearrange multi-depth 20" loading="lazy">
            </div>
            
            <p>The next step is the determination of the maximum number of stock transfers:</p>
            
            <div class="screenshot-container">
                <img width="839" height="483" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 21.png" alt="SAP EWM MFS rearrange multi-depth 21" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="547" height="139" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 22.png" alt="SAP EWM MFS rearrange multi-depth 22" loading="lazy">
            </div>
            
            <p>This value defines the maximum number of consecutive stock transfers allowed per HU in an aisle before the HU must be moved out of the aisle. When the HU reaches the threshold, the system moves the HU out of the automated aisle to a dedicated bin. This allows you to, for example, realign the content of the HU to ensure it is still correctly placed in the HU (e.g. goods on a pallet might slightly move/shift with each physical movement of the pallet). As soon as the HU moves out of the automated aisle, the system resets the number of stock transfers to zero.</p>
            <p>The default error bin can be maintained via transaction <code>/SCWM/MFS_RSRC</code></p>
            
            <div class="screenshot-container">
                <img width="936" height="367" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 23.png" alt="SAP EWM MFS rearrange multi-depth 23" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="936" height="112" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 24.png" alt="SAP EWM MFS rearrange multi-depth 24" loading="lazy">
            </div>
            
            <p>Before we now create the rearrangement task we check whether the HU which is in scope for rearrangement might already have a warehouse task (e.g. a pick task for another delivery). If this is the case EWM writes the task into the returning variable and leaves the method:</p>
            
            <div class="screenshot-container">
                <img width="936" height="574" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 25.png" alt="SAP EWM MFS rearrange multi-depth 25" loading="lazy">
            </div>
            
            <p>Note that this logic might cause problems for your operations as you will remove pallets from stock which might have been planned for a removal much later only. As an alternative for a Z-solution you might want to think about cancelling the task and re-create a new one once the stock transfer is done. In case the HU in scope does not have a warehouse task, EWM now creates a new one:<br>- Number of stock transfer in HU header &lt; resource threshold: A HU task with the WPT from PLC customizing (details above) - Number of stock transfer in HU header &gt;= resource threshold: A HU task towards the error bin of the resource (details above)</p>
            
            <div class="screenshot-container">
                <img width="936" height="601" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 26.png" alt="SAP EWM MFS rearrange multi-depth 26" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="936" height="593" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 27.png" alt="SAP EWM MFS rearrange multi-depth 27" loading="lazy">
            </div>
            
            <p>‚Ä¶and that‚Äôs it. To close the method we fill the return variable and hopefully log a success message:</p>
            
            <div class="screenshot-container">
                <img width="936" height="335" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 28.png" alt="SAP EWM MFS rearrange multi-depth 28" loading="lazy">
            </div>
            
            <p>The task is handed over to the calling program and eventually to FM <code>/SCWM/MFS_WT_DET</code> which initially triggered the rearrangement logic and is responsible to set the next WT to be processed.</p>
            
            <div class="screenshot-container">
                <img width="739" height="489" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 29.png" alt="SAP EWM MFS rearrange multi-depth 29" loading="lazy">
            </div>
            
            <p>Within this loop EWM is doing some checks on the storage type customizing, enriches the penalty table mentioned above (do not want to go into detail here) and finally reaches method <code>select_empty_bins</code>:</p>
            <p>As the last part of this blog we want to think about how to enhance the standard fallback here.</p>
            <p><strong>How to enhance the EWM MFS storage bin standard here?</strong></p>
            <p>In case you want to enhance here you should create a new subclass that inherits from the standard fallback class <code>/SCWM/CL_EI_MFS_MD_REARR_HU</code>. Some possible scenarios to be considered for your warehouse and potential reason for an enhancement here:<br />- Inconsistencies of storage bin data: As you know, EWM sometimes tends towards the creation of inconsistent bin master data (e.g. capacity data like current number of HUs on the bin). Unfortunately, the standard fallback classes makes use of this master data in order to decide whether to apply the rearrangement logic or not. This is kind fragile and you might want to replace it with a different logic in your project:</p>
            
            <div class="screenshot-container">
                <img width="936" height="364" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 30.png" alt="SAP EWM MFS rearrange multi-depth 30" loading="lazy">
            </div>
            
            <p>- Cancellation of tasks: As shown above, open tasks for HUs on position 01 are being processed in case they exists. For your process it might more better to cancel those tasks, execute the rearrangement and create them again once done (e.g. in case the corresponding delivery should not be picked/processed at this point in time)</p>
            <p>- Movements of multiple HUs from one bin (e.g. triple-depth warehouse): This is not supported by the standard logic at all and has to covered by a z-logic in case it is needed or your operation:</p>
            
            <div class="screenshot-container">
                <img width="936" height="259" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 31.png" alt="SAP EWM MFS rearrange multi-depth 31" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img width="936" height="277" src="..\..\assets\images\mfs\rearrange/SAP EWM MFS rearrange multi-depth 32.png" alt="SAP EWM MFS rearrange multi-depth 32" loading="lazy">
            </div>
            
            <p>Finally, we handover a list of possible empty destination bins to the caller.</p>
            <p><strong>That's it!</strong></p>
        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>üìß Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name (optional)">
                    <input type="text" name="LNAME" placeholder="Last name (optional)">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>‚ñ∂Ô∏è YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube">Subscribe on YouTube</a>
            </div>
        </div>

        <div class="freelancer-cta">
            <p><strong>Need EWM expertise within your project?</strong><br>
            WMexperts.online is a knowledge-sharing project of Hendrik, a Senior SAP EWM Freelancer.</p>
            <a href="#" class="btn-freelance">Explore my Freelance Profile ‚Üí</a>
        </div>
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer>&copy; 2026 WMexperts.online ‚Ä¢ Functional & Technical SAP EWM Expertise</footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

</body>
</html>