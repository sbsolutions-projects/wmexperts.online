<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover how SAP EWM MFS realizes task interleaving in an automatic storage & retrieval system (ASRS). Learn the technical details and implementation.">
    <meta name="keywords" content="SAP EWM, MFS, Task Interleaving, ASRS, Automated Storage, Retrieval System, Warehouse Management">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Discover SAP EWM MFS - Task Interleaving in an ASRS | WMexperts">
    <meta property="og:description" content="How does SAP EWM MFS realize task interleaving in an automatic storage & retrieval system (ASRS)? Get the answer in this blog post!">
    <meta property="article:published_time" content="2023-02-25">
    <meta property="article:modified_time" content="2023-02-25">

    <!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "Discover SAP EWM MFS - Task Interleaving in an ASRS",
  "description": "How does SAP EWM MFS realize task interleaving in an automatic storage & retrieval system (ASRS)? Get the answer in this blog post!",
  "image": "../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_00.png",
  "datePublished": "2023-02-25T00:00:00Z",
  "dateModified": "2023-02-25T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "Hendrik"
  },
  "publisher": {
    "@type": "Organization",
    "name": "WMexperts",
    "logo": {
      "@type": "ImageObject",
      "url": "https://wmexperts.online/assets/favicon/favicon-32x32.png"
    }
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://wmexperts.online/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "SAP EWM MFS",
      "item": "https://wmexperts.online/blog-posts/mfs/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Discover SAP EWM MFS - Task Interleaving in an ASRS",
      "item": "https://wmexperts.online/blog-posts/mfs/mfs-interleaving.html"
    }
  ]
}
</script>

    <title>Discover SAP EWM MFS - Task Interleaving in an ASRS | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

    <header id="main-header"></header>

    <article>
        <div class="breadcrumb">Discover SAP EWM MFS</div>
        <h1>Task Interleaving in an ASRS</h1>

		        <div class="video-wrapper">
            <iframe src="https://www.youtube-nocookie.com/embed/tDbgdVv1Ecs" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p>This blog is part of the series '<em>SAP EWM meets Automation – Discover EWM MFS</em>'. As with all posts of this series, the content provided here has been created in cooperation with the SAP EWM team at Swisslog. Feel free to visit their <a href="https://www.swisslog.com/en-us/products-systems-solutions/software-inventory-management/sap-ewm-extended-warehouse-management" target="_blank">website</a> in case you want to learn more about the services offered by Swisslog or to browse open positions within their EWM team!</p>

            <strong>What is task interleaving and why is it important for MFS environments?</strong>

            <p>Before we dive into the technical details for interleaving in automated areas we should first clarify what task interleaving is from a functional perspective.</p>

            <p>Task interleaving describes a process or strategy by which tasks of different types are combined with each other in order to reduce the total travel time and / or distance. For those of you who are not familiar at all with this concept I would suggest reading this <a href="../understand/understand-interleaving.html" target="_blank" rel="noopener">blog article</a> (or watching the corresponding <a href="https://youtu.be/1QnK3QPZPUM" target="_blank" rel="noopener">video</a>) in order to get a basic understanding.</p>

            <p>As an introduction into this article I will only give a very quick recap about how EWM implements interleaving in manually operated (e.g. via radio frequency based devices / dialogues) areas of the warehouse.</p>

            <p>We take this simple process as an example where we have forklift-operated movements of full pallets into and out of a pallet rack:</p>

            <div class="screenshot-container">
                <img width="889" height="497" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_00.png" alt="Task Interleaving Overview" loading="lazy">
            </div>

            <p>EWM creates tasks in two queues – one putaway queue and one removal queue. In the scenario shown above, the warehouse operator receives the following sequence: putaway – putaway – putaway – removal. Interleaving now tries to mix up this sequence in order to save travel time for the operator. The resulting sequence could look like: putaway – removal – putaway – removal – putaway.</p>

            <p>This is achieved by flipping queues. At a certain point the system decides that it is time to jump from the putaway queue to the removal queue and vice versa.</p>

            <div class="screenshot-container">
                <img width="1355" height="237" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_01.png" alt="Queue Flipping Mechanism" loading="lazy">
            </div>

            <strong>How does interleaving work in a Material Flow System with ASRS?</strong>

            <p>Cranes in automated storage &amp; retrieval systems are created as resources in EWM. Check this <a href="../mfs/ewm-plc-integration.html" target="_blank" rel="noopener">blog</a> (or this <a href="https://youtu.be/OfmAROIuV2Y" target="_blank" rel="noopener">video</a>) in case you want to learn more about important MFS objects like 'resources'.</p>

            <p>Other than RF resources, those MFS resources are assigned to exactly one queue and process warehouse orders from this queue in a specific sequence. So you might already notice that the approach with the queue sequencing (jumping in between putaway and removal queue types like described above) will not work here. So how does it work in such an environment?</p>

            <div class="screenshot-container">
                <img width="935" height="854" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_04.png" alt="MFS Queue Structure" loading="lazy">
            </div>

            <p>The answer is: EWM implements interleaving for MFS by determining the next warehouse order to be processed based on the <strong>characteristics of the warehouse order</strong> instead of using queue flipping! When you drill down into the customizing (shown in the figure below) you will see that there is a flag which allows you to activate interleaving on a resource type level. This makes sense as it is a decision on the type of resource and not on the individual resource.</p>

            <p>If interleaving is active for a resource type, EWM will try to alternate between putaway and retrieval tasks. This helps to minimize travel time in an ASRS as the crane needs to move through the warehouse in order to reach the different destinations.</p>

            <strong>Technical Implementation – Looking into the SAP EWM Code</strong>

            <p>In order to fully understand the interleaving approach for ASRS there is no other option than looking into the coding.</p>

            <p>We start in function module <code>/SCWM/MFS_WT_DT</code>. For those of you who are following my blog this should sound familiar. This FM is responsible to decide which WT out of a pool of possible WTs (~ our crane queue) is the next one to be processed (check this <a href="../mfs/ewm-plc-integration.html" target="_blank" rel="noopener">blog post</a> or <a href="https://youtu.be/DaV-p9twI9E" target="_blank" rel="noopener">video</a> in order to learn more about the process of selecting WTs for telegram creation).</p>

            <p>First EWM checks whether to execute interleaving at all. Subroutine check_resource sets variable <em>lv_intleav</em> with the help of FM <code>/SCWM/RSRC_TRSRC_TYP_READ</code>, based on the resource type customizing that I showed above:</p>

            <div class="screenshot-container">
                <img width="1024" height="306" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_09.png" alt="Check Resource Interleaving" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="857" height="579" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_10.png" alt="Resource Type Configuration" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="1024" height="227" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_11.png" alt="Interleaving Flag Details" loading="lazy">
            </div>

            <p>In order to fully understand the interleaving approach for ASRS we need to look at the actual implementation. We start in function module <code>/SCWM/MFS_WT_DT</code> which is responsible to decide which WT out of a pool of possible WTs (~ our crane queue) is the next one to be processed.</p>

            <p>First EWM checks whether to execute interleaving at all. Subroutine check_resource sets variable <em>lv_intleav</em> with the help of FM <code>/SCWM/RSRC_TRSRC_TYP_READ</code>, based on the resource type customizing:</p>

            <div class="screenshot-container">
                <img width="1024" height="299" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_12.png" alt="Interleaving Variable Setup" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="1024" height="369" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_13.png" alt="Check Interleaving Logic" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="1024" height="757" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_14.png" alt="Interleaving Decision Tree" loading="lazy">
            </div>

            <p>We now have the answer to the questions whether interleaving is active or not (lv_intleav). For our example we assume it is active. Thus, EWM now calls subroutine <em>check_interleaving</em> in order to decide whether the next WT to be processed has to be</p>

            <ul>
                <li>a movement which is supposed to putaway a HU,</li>
                <li>or a movement which is supposed to retrieve a HU.</li>
            </ul>

            <div class="screenshot-container">
                <img width="1024" height="408" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_15.png" alt="Interleaving Decision Strategy" loading="lazy">
            </div>

            <p>Remember, the main purpose of task interleaving is to realize a continuous cycle of putaway-retrieval-putaway-retrieval …. and so on.</p>

            <p>Thus, in order to decide about the direction of the next movement, we need to determine the direction of the last movement (as we know the next one should point towards the opposite direction). EWM uses a simple but effective trick here. Based on the fact that the coding is called during task confirmation, EWM knows that our resource is currently located at the destination bin of the last movement. This destination bin is</p>

            <ul>
                <li>either a storage bin within our MFS storage type (in case the last movement has been a putaway task)</li>
                <li>or a handover storage bin (which has to be a communication point in order to induce the next movement) outside of our MFS storage type (in case the last movement has been a retrieval task)</li>
            </ul>

            <p>So EWM simply checks whether the current bin of the resource is a communication point or not. If yes, the last movement has been a retrieval task and if not, the last movement has been a putaway task. It's as simple as that:</p>

            <div class="screenshot-container">
                <img width="1024" height="563" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_16.png" alt="Current Bin Communication Point Check" loading="lazy">
            </div>

            <p>You can see in the screenshot above that our famous variable <em>cv_intleav</em> is filled with different values based on the result of the check described above.</p>

            <p>This variable is then handed over to subroutine select_wo which finally makes the decision which concrete warehouse order is the next one to be processed (~ the next one for which EWM will create a telegram and send it to the subsystem):</p>

            <div class="screenshot-container">
                <img width="1024" height="536" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_17.png" alt="Warehouse Order Selection" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="1024" height="371" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_18.png" alt="Select Warehouse Order Logic Part 1" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="732" height="411" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_19.png" alt="Select Warehouse Order Logic Part 2" loading="lazy">
            </div>

            <p>You can see that SAP makes use of the content field from table <code>/SCWM/WO_RSRC_TY</code> (with this blog post we will not go into detail here about how this field is being filled – just keep it as a given that this table holds information which classifies a warehouse order as being a putaway or a retrieval task).</p>

            <div class="screenshot-container">
                <img width="1024" height="533" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_20.png" alt="Warehouse Order Content Field" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="732" height="411" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_21.png" alt="Content Field Mapping" loading="lazy">
            </div>

            <p>From the perspective of interleaving there is nothing more important within the subroutine select_wo. At the end it hands over the local table <em>lt_who</em> carrying the selection of sorted warehouse orders back to FM <code>/SCWM/MFS_WT_DET</code>. The upcoming coding grabs the first WT from the table and tries to create a telegram for this WT. Telegram creation is triggered at the very end of this FM via FM <code>/SCWM/MFS_SEND</code>:</p>

            <div class="screenshot-container">
                <img width="1010" height="766" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_22.png" alt="Telegram Creation Flow Part 1" loading="lazy">
            </div>

            <div class="screenshot-container">
                <img width="1024" height="560" src="../../assets/images/mfs/mfs-interleaving/SAP%20EWM%20MFS%20Task%20interleaving%20in%20ASRS_23.png" alt="Telegram Creation Flow Part 2" loading="lazy">
            </div>

            <p>From here onwards the logic has nothing specific in the context of interleaving and should not be in scope of this blog post. I wrote a different one in this blog-series from which you can derive all details about how EWM creates and sends telegrams to a subsystem.</p>

            <strong><u>Summary</u></strong>

            <ul>
                <li>Interleaving for MFS storage types is activated via the resource type customizing</li>
                <li>In contrast to interleaving in manually operated storage types, we are not using different queue types and queue sequences assigned to resources</li>
                <li>Every resource in a MFS environment is working with one queue only and thus, has to determine the next WO to be processed based on the WO characteristics instead of a queue flip-flop</li>
                <li>EWM uses the current bin of the given resource in order to figure out whether the last processed WT has been a putaway or retrieval task</li>
                <li>Based on this insight it selects the next WT for the opposite direction. For this selection it uses the content field from table <code>/SCWM/WO_RSRC_TY</code></li>
            </ul>

        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>📧 Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name">
                    <input type="text" name="LNAME" placeholder="Last name">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>▶️ YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube" >Subscribe on YouTube</a>
            </div>
        </div>

        <!-- FREELANCER CTA (Commented out - to be launched later)
        <section class="freelancer-cta" aria-labelledby="cta-heading">
            <h2 id="cta-heading">Need Support around SAP EWM?</h2>
            <p>WMexperts.online is the knowledge hub of Hendrik, a Senior SAP EWM Consultant with expertise in functional design, technical implementation, and project leadership.</p>
            <a href="#" class="btn-primary">Explore My Offerings →</a>
        </section>
        -->
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer id="main-footer"></footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

    <script>
    // Load global components
    fetch('/header-content.html').then(res => res.text()).then(html => document.getElementById('main-header').innerHTML = html);
    fetch('/footer-content.html').then(res => res.text()).then(html => document.getElementById('main-footer').innerHTML = html);
    </script>

</body>
</html>






