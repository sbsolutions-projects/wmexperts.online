<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="In-depth article about SAP EWM. Learn technical and functional details about quant determination for stock removal strategies, including customizing table /SCWM/T334RR and BAdI /SCWM/EX_CORE_RMS_DETERMINE.">
    <meta name="keywords" content="SAP EWM, Warehouse Management, Quant determination, Stock removal strategy, /SCWM/EX_CORE_RMS_DETERMINE, /SCWM/T334RR, ABAP, Enhancement">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Quant determination for stock removal strategy | WMexperts">
    <meta property="og:description" content="In-depth article about SAP EWM. Learn technical and functional details about quant determination for stock removal strategies.">
    <meta property="article:published_time" content="2021-11-08">
    <meta property="article:modified_time" content="2021-11-08">

    <!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "BlogPosting",
  "headline": "Quant determination for stock removal strategy",
  "description": "In-depth article about SAP EWM. Learn technical and functional details about quant determination for stock removal strategies.",
  "image": "../../assets/images/enhance/quant-det/EWM enhance stock removal_01.png",
  "datePublished": "2021-11-08T00:00:00Z",
  "dateModified": "2021-11-08T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "Hendrik"
  },
  "publisher": {
    "@type": "Organization",
    "name": "WMexperts",
    "logo": {
      "@type": "ImageObject",
      "url": "https://wmexperts.online/assets/favicon/favicon-32x32.png"
    }
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://wmexperts.online/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Enhance SAP EWM",
      "item": "https://wmexperts.online/blog-posts/enhance/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Quant determination for stock removal strategy",
      "item": "https://wmexperts.online/blog-posts/enhance/enhance-quant-det.html"
    }
  ]
}
</script>

    <title>Quant determination for stock removal strategy | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

    <header id="main-header"></header>

    <article>
        <div class="breadcrumb">Enhance SAP EWM</div>
        <h1>Quant determination for stock removal strategy</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube-nocookie.com/embed/I8-88KeFT8s?rel=0" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p><em>The purpose of this series of blogs/videos is to give an overview about how to enhance specific functional areas of SAP EWM quant determination. This series is useful for developers jumping (or being pushed ) from other modules into EWM or for more experienced consultants in order to gain a deeper understanding of specific topics. </em></p>
            <p>In this post we focus on the stock removal rule. Thus, we ignore all other functions which have an impact on the source SAP EWM quant determination (e.g. storage type search sequence, warehouse process type etc.).<br>For a better understanding just imagine sitting in front of a rack with many different bins storing the same product but with different quantities, GR dates, Best-before-dates, Units of Measure, HU type, number of open tasks and so on. </p>
            <p><strong>What is possible via standard customizing?</strong><br>No #1 rule for every EWM consultant – always explore standard options ahead of touching the code. Even the smallest development will kick your ass with small surprises (latest the person who has to support your Z-ideas ).<br>This customizing node answers the question about which source bin/quant to select in order to create a warehouse task against a warehouse request item:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_01.png" alt="" loading="lazy">
            </div>
            
            <p>As mentioned above, EWM gives us a long list of stock attributes which can be used to sort possible source quants. Simply select the attributes that you want to consider, put them in a meaningful sequence and set the flag to sort descending if needed (if you do not set the flag, EWM will sort ascending by default). This customizing is stored in table <code>/SCWM/T334RR</code>.</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_02.png" alt="" loading="lazy">
            </div>
            
            <p>Most common examples are a sorting based on <code>WDATU</code> in order to realize FIFO/LIFO or a sorting based on <code>VFDAT</code> in order to realizes FEFO/LEFO. Usually this is combined with a sorting based on <code>QUAN</code> in order to clean up partially filled bins or in order to minimize the number of picks per warehouse request item.<br>I do explain more complex examples as part of the <a href="https://youtu.be/I8-88KeFT8s" target="_blank" rel="noopener noreferrer">video</a> about this topic.</p>
            
            <p><strong>Where can I find the standard coding?</strong><br>In case you have a problem with the standard behavior that needs to be debugged or in case you are just curious about how the standard coding processes the customizing mentioned above, you need to look at include <code>/SCWM/LREM_BIN_DETF12</code>.<br>In subroutine <code>rem_rule_get</code> (1) EWM reads table <code>/SCWM/T334RR</code> which stores the customizing. Once done, subroutine <code>qmat_sort</code> applies the sorting to the internal table of possible source quants (<code>ct_qmat</code>):</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_03.png" alt="" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_04.png" alt="" loading="lazy">
            </div>
            
            <p><strong>How can I enhance here in a ‘clean’ way?</strong><br>Badi <code>/SCWM/EX_CORE_RMS_DETERMINE</code> is not the only option to implement a custom stock removal rule but one of the most powerful and most used ones:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_05.png" alt="" loading="lazy">
            </div>
            
            <p>The interface method imports lots of data which can be used as a base for a custom logic. E.g. stock data (&gt; <code>ct_qmat</code> imports stock details based on the <code>AQUA</code> table), product master data or customizing details about source storage type and warehouse process type:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_06.png" alt="" loading="lazy">
            </div>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_07.png" alt="" loading="lazy">
            </div>
            
            <p>Inside of the Badi you use this data as an input in order to change the sorting and/or the content of the internal table <code>ct_qmat</code>. You write the changed data into table <code>et_qmat_cus</code> and export this table to the caller program. In addition to this you must set the flag <code>lv_set</code> in order have the standard consider your changes:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_09.png" alt="" loading="lazy">
            </div>
            
            <p><strong>Bonus (to get inspired)</strong><br>SAP delivers a handful of sample implementations. You can use those to explore the options that you have with this Badi and learn how to implement an enhancement here in a technically accurate way:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_10.png" alt="" loading="lazy">
            </div>
            
            <p>As an example we take a look at class <code>/SCWM/CL_EI_CORE_RMS_DET_MFS</code> which implements a logic that evaluates the status of the MFS resources (e.g. cranes for an automated high-bay warehouse). If the resources are not available (e.g. ran into an error and not recovered yet) the bins/quants from the respective aisles are excluded from the list of possible source bins/quants:</p>
            
            <div class="screenshot-container">
                <img src="../../assets/images/enhance/quant-det/EWM enhance stock removal_11.png" alt="" loading="lazy">
            </div>
            
            <p><strong>Summary</strong><br>- EWM standard already provides a pretty powerful customizing which can be used to sort possible source quants based on one or multiple stock attributes. Evaluate all options around the standard customizing before you consider implementing the Badi!<br>- Badi <code>/SCWM/EX_CORE_RMS_DETERMINE</code> is the place to be in case you want to implement your own logic to select a source quant for picking/stock removal<br>- Before you implement your own logic, have a look at the standard example classes in order to learn and get inspired!</p>
            
        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>📧 Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name">
                    <input type="text" name="LNAME" placeholder="Last name">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>▶️ YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube" >Subscribe on YouTube</a>
            </div>
        </div>

        <!-- FREELANCER CTA (Commented out - to be launched later)
        <section class="freelancer-cta" aria-labelledby="cta-heading">
            <h2 id="cta-heading">Need Support around SAP EWM?</h2>
            <p>WMexperts.online is the knowledge hub of Hendrik, a Senior SAP EWM Consultant with expertise in functional design, technical implementation, and project leadership.</p>
            <a href="#" class="btn-primary">Explore My Offerings →</a>
        </section>
        -->
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer id="main-footer"></footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

    <script>
    // Load global components
    fetch('/header-content.html').then(res => res.text()).then(html => document.getElementById('main-header').innerHTML = html);
    fetch('/footer-content.html').then(res => res.text()).then(html => document.getElementById('main-footer').innerHTML = html);
    </script>

</body>
</html>





