<h1>Enhance SAP EWM</h1>
<h2>Quant determination for stock removal strategy</h2>
<p><em>The purpose of this series of blogs/videos is to give an overview about how to enhance specific functional areas of SAP EWM quant determination. This series is useful for developers jumping (or being pushed ) from other modules into EWM or for more experienced consultants in order to gain a deeper understanding of specific topics. </em></p>
<p>In this post we focus on the stock removal rule. Thus, we ignore all other functions which have an impact on the source SAP EWM quant determination (e.g. storage type search sequence, warehouse process type etc.).<br>For a better understanding just imagine sitting in front of a rack with many different bins storing the same product but with different quantities, GR dates, Best-before-dates, Units of Measure, HU type, number of open tasks and so on. </p>
<p><strong>What is possible via standard customizing?</strong><br>No #1 rule for every EWM consultant ‚Äì always explore standard options ahead of touching the code. Even the smallest development will kick your ass with small surprises (latest the person who has to support your Z-ideas ).<br>This customizing node answers the question about which source bin/quant to select in order to create a warehouse task against a warehouse request item:</p>		
															<img width="872" height="287" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_01-1.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_01-1.png 872w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_01-1-300x99.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_01-1-768x253.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_01-1-640x211.png 640w" sizes="(max-width: 872px) 100vw, 872px" />															
		<p>As mentioned above, EWM gives us a long list of stock attributes which can be used to sort possible source quants. Simply select the attributes that you want to consider, put them in a meaningful sequence and set the flag to sort descending if needed (if you do not set the flag, EWM will sort ascending by default). This customizing is stored in table /SCWM/T334RR.</p>		
															<img width="1024" height="833" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_02-1-1024x833.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_02-1-1024x833.png 1024w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_02-1-300x244.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_02-1-768x625.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_02-1-640x521.png 640w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_02-1.png 1138w" sizes="(max-width: 1024px) 100vw, 1024px" />															
		<p>Most common examples are a sorting based on WDATU in order to realize FIFO/LIFO or a sorting based on VFDAT in order to realizes FEFO/LEFO. Usually this is combined with a sorting based on QUAN in order to clean up partially filled bins or in order to minimize the number of picks per warehouse request item.<br />I do explain more complex examples as part of the <a href="https://youtu.be/I8-88KeFT8s">video</a> about this topic.</p><p><strong>Where can I find the standard coding?</strong><br />In case you have a problem with the standard behavior that needs to be debugged or in case you are just curious about how the standard coding processes the customizing mentioned above, you need to look at include /SCWM/LREM_BIN_DETF12.<br />In subroutine rem_rule_get (1) EWM reads table /SCWM/T334RR which stores the customizing. Once done, subroutine qmat_sort applies the sorting to the internal table of possible source quants (ct_qmat):</p>		
															<img width="980" height="513" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_03-1.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_03-1.png 980w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_03-1-300x157.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_03-1-768x402.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_03-1-640x335.png 640w" sizes="(max-width: 980px) 100vw, 980px" />															
																<a href="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTcyMzQsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDIxXC8xMVwvRVdNLWVuaGFuY2Utc3RvY2stcmVtb3ZhbF8wNC0xLnBuZyJ9">
							<img width="1024" height="308" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1-1024x308.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1-1024x308.png 1024w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1-300x90.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1-768x231.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1-640x192.png 640w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1-1536x462.png 1536w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_04-1.png 1560w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p><strong>How can I enhance here in a ‚Äòclean‚Äô way?</strong><br />Badi /SCWM/EX_CORE_RMS_DETERMINE is not the only option to implement a custom stock removal rule but one of the most powerful and most used ones:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTcyMzUsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDIxXC8xMVwvRVdNLWVuaGFuY2Utc3RvY2stcmVtb3ZhbF8wNS0xLnBuZyJ9">
							<img width="1024" height="273" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1-1024x273.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1-1024x273.png 1024w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1-300x80.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1-768x205.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1-640x171.png 640w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1-1536x409.png 1536w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_05-1.png 1553w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>The interface method imports lots of data which can be used as a base for a custom logic. E.g. stock data (&gt; ct_qmat imports stock details based on the AQUA table), product master data or customizing details about source storage type and warehouse process type:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTcyMzYsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDIxXC8xMVwvRVdNLWVuaGFuY2Utc3RvY2stcmVtb3ZhbF8wNi0xLnBuZyJ9">
							<img width="1024" height="298" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1-1024x298.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1-1024x298.png 1024w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1-300x87.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1-768x223.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1-640x186.png 640w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_06-1.png 1318w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
															<img width="557" height="457" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_07-1.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_07-1.png 557w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_07-1-300x246.png 300w" sizes="(max-width: 557px) 100vw, 557px" />															
		<p>Inside of the Badi you use this data as an input in order to change the sorting and/or the content of the internal table ct_qmat. You write the changed data into table et_qmat_cus and export this table to the caller program. In addition to this you must set the flag lv_set in order have the standard consider your changes:</p>		
															<img width="699" height="117" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_09-1.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_09-1.png 699w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_09-1-300x50.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_09-1-640x107.png 640w" sizes="(max-width: 699px) 100vw, 699px" />															
		<p><strong>Bonus (to get inspired)</strong><br />SAP delivers a handful of sample implementations. You can use those to explore the options that you have with this Badi and learn how to implement an enhancement here in a technically accurate way:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTcyNDAsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDIxXC8xMVwvRVdNLWVuaGFuY2Utc3RvY2stcmVtb3ZhbF8xMC0xLnBuZyJ9">
							<img width="1024" height="461" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1-1024x461.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1-1024x461.png 1024w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1-300x135.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1-768x345.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1-640x288.png 640w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1-1536x691.png 1536w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_10-1.png 1614w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>As an example we take a look at class /SCWM/CL_EI_CORE_RMS_DET_MFS which implements a logic that evaluates the status of the MFS resources (e.g. cranes for an automated high-bay warehouse). If the resources are not available (e.g. ran into an error and not recovered yet) the bins/quants from the respective aisles are excluded from the list of possible source bins/quants:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTcyNDEsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDIxXC8xMVwvRVdNLWVuaGFuY2Utc3RvY2stcmVtb3ZhbF8xMS0xLnBuZyJ9">
							<img width="1024" height="753" src="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1-1024x753.png" alt="" srcset="https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1-1024x753.png 1024w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1-300x221.png 300w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1-768x565.png 768w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1-640x471.png 640w, https://wmexperts.online/wp-content/uploads/2021/11/EWM-enhance-stock-removal_11-1.png 1229w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p><strong>Summary</strong><br />- EWM standard already provides a pretty powerful customizing which can be used to sort possible source quants based on one or multiple stock attributes. Evaluate all options around the standard customizing before you consider implementing the Badi!<br />- Badi /SCWM/EX_CORE_RMS_DETERMINE is the place to be in case you want to implement your own logic to select a source quant for picking/stock removal<br />- Before you implement your own logic, have a look at the standard example classes in order to learn and get inspired!</p>		
		<p><em>I hope this blog post provides value to you and you could learn something. Please feel free to s</em><em>ubscribe to my <strong><a href="https://wmexperts.online/blog-newsletter/" target="_blank" rel="noopener">blog updates </a></strong>or my <strong><a href="https://www.youtube.com/channel/UCRcn9mXPIJ58JVTeU0oKrFg?sub_confirmation=1" target="_blank" rel="noopener">youtube channel </a></strong>in case you want to be notified about new posts!</em></p>		
					<h2>Get my monthly blog-updates!</h2>				
					<h2>Subscribe to my Youtube channel!</h2>				
					<a href="https://www.youtube.com/channel/UCRcn9mXPIJ58JVTeU0oKrFg?sub_confirmation=1" target="_blank">
									Subscribe
					</a><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="In-depth article about SAP EWM. Learn technical and functional details about [Topic].">
    <meta name="keywords" content="SAP EWM, Warehouse Management, [Topic Keywords]">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Article Title | WMexperts">
    <meta property="og:description" content="In-depth article about SAP EWM. Learn technical and functional details about [Topic].">
    <meta property="article:published_time" content="2024-01-01">
    <meta property="article:modified_time" content="2024-01-01">

    <!-- Structured Data -->
    <script type="application/ld+json">
    [
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Article Title",
        "description": "In-depth article about SAP EWM. Learn technical and functional details about [Topic].",
        "image": "https://wmexperts.online/assets/images/placeholder.png",
        "datePublished": "2024-01-01",
        "dateModified": "2024-01-01",
        "author": {
          "@type": "Person",
          "name": "Hendrik"
        },
        "publisher": {
          "@type": "Organization",
          "name": "WMexperts",
          "logo": {
            "@type": "ImageObject",
            "url": "https://wmexperts.online/assets/logo.png"
          }
        }
      },
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://wmexperts.online/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "https://wmexperts.online/blog-posts/category/article-slug.html"
        }]
      }
    ]
    </script>

    <title>Article Title | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sap-blue: #005597;
            --bg-light: #F9FAFB;
            --text-dark: #111827;
            --text-muted: #4B5563;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.8;
        }

        /* --- NAVIGATION --- */
        header {
            background: #fff;
            padding: 1rem 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo { font-weight: 600; font-size: 1.4rem; color: var(--text-dark); text-decoration: none; }
        .logo span { color: var(--sap-blue); }
        nav a { text-decoration: none; color: var(--text-muted); font-size: 0.9rem; font-weight: 600; }

        /* --- ARTICLE STRUCTURE --- */
        article { max-width: 800px; margin: 4rem auto; padding: 0 20px; }

        .breadcrumb {
            font-size: 0.75rem;
            color: var(--sap-blue);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.8rem; color: var(--text-dark); line-height: 1.2; margin-bottom: 1.5rem; letter-spacing: -1px; }

        /* --- RESPONSIVE VIDEO CONTAINER --- */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin: 2.5rem 0;
            border-radius: 12px;
            background: #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .content p { margin-bottom: 0.75rem; font-size: 1.1rem; }
        .content h2 { color: var(--text-dark); margin-top: 1.75rem; font-size: 1.8rem; border-bottom: 2px solid var(--bg-light); padding-bottom: 0.5rem; }
        .content ul { padding-left: 1.5rem; margin-bottom: 2rem; }
        .content li { margin-bottom: 0.75rem; font-size: 1.05rem; }

        /* --- TECHNICAL & IMAGE BLOCKS --- */
        .screenshot-container { margin: 1.75rem 0; text-align: center; }
        
        .screenshot-container img {
            max-width: 66.67%;
            height: auto;
            display: block;
            margin: 0 auto;
            background-color: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: zoom-in;
            transition: transform 0.2s ease;
        }

        .screenshot-container img:hover { transform: scale(1.01); }

        pre {
            background: #F3F4F6;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--sap-blue);
            margin: 2rem 0;
            color: var(--text-dark);
        }

        code {
            font-family: 'Courier New', monospace;
            background: #EEF2F6;
            color: var(--sap-blue);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.95em;
            font-weight: 500;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            font-weight: normal;
        }

        /* --- ENHANCED LIGHTBOX (ZOOM) STYLING --- */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            cursor: zoom-out;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        #lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease;
        }

        #lightbox img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            cursor: default;
        }

        /* Lightbox Controls */
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #ffffff;
            cursor: pointer;
            z-index: 10000;
            transition: transform 0.2s ease;
            font-weight: 300;
            line-height: 1;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            transform: rotate(90deg);
        }

        .lightbox-prev,
        .lightbox-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: #ffffff;
            cursor: pointer;
            padding: 20px;
            transition: opacity 0.2s ease;
            user-select: none;
            z-index: 10000;
        }

        .lightbox-prev:hover,
        .lightbox-next:hover {
            opacity: 0.7;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .lightbox-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 10000;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Prevent body scroll when lightbox is open */
        body.lightbox-open {
            overflow: hidden;
        }

        /* --- STAY UPDATED SECTION --- */
        .stay-updated {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .stay-updated-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stay-updated-card h3 {
            color: var(--text-dark);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stay-updated-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .newsletter-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .newsletter-form input {
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--sap-blue);
            box-shadow: 0 0 0 3px rgba(0, 85, 151, 0.1);
        }

        .btn-subscribe {
            padding: 10px 20px;
            background: var(--sap-blue);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-subscribe:hover {
            background: var(--sap-blue-light);
        }

        .btn-youtube {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 12px 24px;
            background: #ff0000;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s ease;
            width: fit-content;
            margin-top: auto;
        }

        .btn-youtube:hover {
            background: #cc0000;
        }

        @media (max-width: 768px) {
            .stay-updated {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* --- FOOTER & CTA --- */
        .freelancer-cta {
            margin-top: 6rem;
            padding: 3rem;
            background: var(--bg-light);
            border-radius: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .btn-freelance {
            display: inline-block;
            background: var(--sap-blue);
            color: #fff;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 1rem;
            transition: background 0.2s ease;
        }

        .btn-freelance:hover {
            background: #004276;
        }

        footer { padding: 4rem 10%; text-align: center; font-size: 0.85rem; color: #9CA3AF; border-top: 1px solid var(--border); }
    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="logo">WM<span>experts</span></a>
        <nav><a href="../../index.html">‚Üê Back to Blog</a></nav>
    </header>

    <article>
        <div class="breadcrumb">Category Name</div>
        <h1>Your Great SAP EWM Insight</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_HERE" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p>Example paragraph text.</p>
            <div class="screenshot-container">
                <img src="../../assets/images/placeholder.png" alt="Descriptive alt text for the image" width="800" height="450" loading="lazy">
            </div>
            <pre>/SCWM/TECHNICAL_DETAILS</pre>
        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>üìß Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name (optional)">
                    <input type="text" name="LNAME" placeholder="Last name (optional)">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>‚ñ∂Ô∏è YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube">Subscribe on YouTube</a>
            </div>
        </div>

        <div class="freelancer-cta">
            <p><strong>Need EWM expertise within your project?</strong><br>
            WMexperts.online is a knowledge-sharing project of Hendrik, a Senior SAP EWM Freelancer.</p>
            <a href="#" class="btn-freelance">Explore my Freelance Profile ‚Üí</a>
        </div>
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer>&copy; 2026 WMexperts.online ‚Ä¢ Functional & Technical SAP EWM Expertise</footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

</body>
</html>
