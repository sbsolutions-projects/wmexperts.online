<h1>Reveal SAP EWM</h1><h2>Warehouse Order Creation Rules DEF and UNDE</h2><p>Who hasn’t faced this situation before? You create a warehouse order, and EWM tells you that it used the warehouse order creation rule ‘DEF’ (or ‘UNDE’). And you’re like, “What the hell!?”<br />This blog post will help you avoid this situation in the future. It will also help you understand that sometimes seeing one of these two WOCRs is a signal to fix an issue in your customizing, and other times it might be just fine.<br />A minimal intro for those of you starting your journey with EWM:</p><p>A ‘Warehouse Order’ bundles multiple ‘Warehouse Tasks’ into processable work packages. The rules for this bundling process are called ‘Warehouse Order Creation Rules’. In the following, I will also use the abbreviation WOCRs to replace the long term.</p><p>For those of you who are not familiar with how the WOCRs work in general, I would recommend to read <a href="https://wmexperts.online/understand-wocr/" target="_blank" rel="noopener">this blog</a> before reading/watching this one here.<br />Adding a small summary here, which you can skip in case you are familiar with the concept (source <a href="http://chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://d.dam.sap.com/a/gNvgs8F/WarehouseOrderProcessing.pdf?rc=10" target="_blank" rel="noopener">SAP HTG for WHO enhancement</a>): </p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_02.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTk5OTEsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wMi5wbmcifQ%3D%3D">
							<img width="1024" height="665" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_02-1024x665.png" alt="SAP EWM WOCR UNDE and DEF_02" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_02-1024x665.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_02-300x195.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_02-768x499.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_02.png 1245w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p><em>(1) Warehouse tasks are created in the system (for example, manually or by wave release).</em><br /><em>(2) (3) The system groups the warehouse tasks by queue and activity area, and determines possible warehouse order creation rules according to the settings made in the Customizing activity Define Search Sequence of Creation Rules for Activity Areas.</em><br /><em>(4) The system tries to apply the warehouse order creation rule according to the sequence specified in the Customizing activity Define Search Sequence of Creation Rules for Activity Areas.</em><br /><em>(5) The system sorts all the warehouse tasks based on the inbound sorting criteria of the warehouse order creation rule.</em><br /><em>(6) (7) At this stage, the system checks whether the sorted warehouse tasks pass the filter of the warehouse order creation rule on item level and on subtotal level.</em><br /><em>(8) The warehouse tasks that have passed the filters are considered when applying the limits specified in the warehouse order creation rule.</em><br /><em>(9) All the warehouse tasks that belong to one warehouse order are passed for packing proposal determination according to the packing profile of the warehouse order creation rule. As a result of the packing proposal determination, the system determines the creation of pick-HUs, the splitting of warehouse tasks (for example, to fit in a pick-HU), and the exclusion of warehouse tasks from the current warehouse order.</em><br /><em>(10) Finally, the warehouse tasks that belong to the current warehouse order are sorted according to the sorting rule of the warehouse order creation rule.</em></p><p><em>After all the warehouse tasks have been checked against the warehouse order creation rule, the warehouse tasks that have not been bundled are checked against the next warehouse order creation rule defined in Customizing.</em></p><p>Anyways – back to the initial question.</p><p><em>What are those DEF and UNDE WOCRs and why are they sometimes applied when creating WOCRs?</em><br />First a quick look into the standard customizing help text:</p><p><em>We recommend that you avoid using the following abbreviations to identify warehouse order creation rules, since we have already assigned them internally for existing warehouse order creation rules. This ensures that the identification you define for a warehouse order creation rule is unique.</em></p><ul><li><em>DEF: Standard rule</em></li><li><em>UNDE: Remainder rule</em></li></ul><p>…ok – that does not help us at all.</p><p>Another look into the SAP Press functional EWM books:</p><ul><li><em>If no warehouse order creation rule is set up in embedded EWM, it assigns all warehouse orders to default rule DEF.</em></li><li><em>If there are no more warehouse order creation rules left in the sequence for a warehouse order, the system assigns them to default rule UNDE.</em><br /><em>…that goes into the right direction abut also comes with a very limited amount of details.</em></li></ul><p>The most helpful content that I’ve found over the years was this extract from the HTG for developers, working with WOs: ‘<a href="http://chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://d.dam.sap.com/a/gNvgs8F/WarehouseOrderProcessing.pdf?rc=10" target="_blank" rel="noopener">How To Program Warehouse Order Processing in Extended Warehouse Management</a>’:</p><p><em>If a warehouse task doesn't fit to any warehouse order creation rule, it's bundled with the rule Undefined (UNDE), together with all the other warehouse tasks that don’t fit to any warehouse order creation rule.</em><br /><em>If the system can’t find a warehouse order creation rule for an activity area in Customizing, the warehouse tasks are bundled with the warehouse order creation rule Default (DEF). This means that all the warehouse tasks for one delivery are bundled together if they are in the same activity area, except for the putaway warehouse tasks where the system creates one warehouse order for each putaway-HU warehouse task (fields FLGHUTO = X and TRART = wmegc_trart_put (1)).</em></p><p>Why do I have to search for this information in the HTG for developers? Why is it not included in the customizing help text?</p><p>Anyways - I still had some open questions, and the same is probably true for you. So, let us look into the system to see if we can find more details about this logic. As usual, I found some useful details that are not included in any of the SAP documents mentioned above!</p><p>While trying to structure this post, I decided to start by looking at the application area of the WOCR ‘DEF’, first in the context of putaway and internal tasks, and then in the context of stock removal. In the second part of this post, we will concentrate on the WOCR ‘UNDE’ and again separate it by process category (putaway vs. removal).</p><p>Throughout the whole article, I am working with test cases and examples to help you understand my findings. In addition to this, you will also find all repository objects that are responsible for controlling the logic.</p><p><strong>ANALYSING the WOCR ‘DEF’</strong></p><p>At first we want to understand the purpose of the WOCR DEF in detail. Remember, the HTG gave us the following information:</p><p><em>If the system can’t find a warehouse order creation rule for an activity area in Customizing, the warehouse tasks are bundled with the warehouse order creation rule Default (DEF). […] except for the putaway warehouse tasks where the system creates one warehouse order for each putaway-HU warehouse task (fields FLGHUTO = X and TRART = wmegc_trart_put (1)).</em></p><p>So, we start to analyze the behavior of the EWM standard in a situation where it cannot find any WOCR based on the given combination of activity area and activity. Let’s look at putaway and internal movements first, before we explore stock removal.</p><p>PUTAWAY/INTERNAL MOVEMENTS</p><p>I start using a warehouse process type of category ‘1’ (putaway) and removed the WOCR determination customizing for my given combination of AA and Activity. The only ones left for my AA were relevant for a different activity:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_03.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMzAsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wMy5wbmcifQ%3D%3D">
							<img width="1024" height="496" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_03-1024x496.png" alt="SAP EWM WOCR UNDE and DEF_03" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_03-1024x496.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_03-300x145.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_03-768x372.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_03.png 1399w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_04.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTk5OTksInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wNC5wbmcifQ%3D%3D">
							<img width="1024" height="263" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_04-1024x263.png" alt="SAP EWM WOCR UNDE and DEF_04" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_04-1024x263.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_04-300x77.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_04-768x197.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_04.png 1398w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>The coding which is responsible to apply WOCRs is called from FM <em>/SCWM/WHO_PARALLEL_CREATE</em>. Based on my customizing, it cannot find a WOCR for the given AA/activity and proceeds with the ‘special logic’ (trying to apply rule MFS or DEF). As our tasks are not relevant for a subsystem (rule ‘MFS’), the only option left is to hand over the constant for the rule DEF to the subroutine <em>who_wcr_apply</em>.</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MTk5OTUsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wNS5wbmcifQ%3D%3D">
							<img width="1024" height="346" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05-1024x346.png" alt="SAP EWM WOCR UNDE and DEF_05" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05-1024x346.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05-300x101.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05-768x259.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05-1536x518.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_05.png 1716w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDAsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wNi5wbmcifQ%3D%3D">
							<img width="1024" height="269" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06-1024x269.png" alt="SAP EWM WOCR UNDE and DEF_06" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06-1024x269.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06-300x79.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06-768x202.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06-1536x404.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_06.png 1709w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>If we are talking about HU WTs of the type ‘putaway’ (WPT TRART = ‘1’ &gt; see WPT customizing screenshot above), this subroutine will make sure to always create a separate WO for each WT.</p><p>For our putaway example that means one WO for each HU WT which is created with a WPT of category ‘1’:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDEsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wNy5wbmcifQ%3D%3D">
							<img width="1024" height="452" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07-1024x452.png" alt="SAP EWM WOCR UNDE and DEF_07" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07-1024x452.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07-300x133.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07-768x339.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07-1536x679.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_07.png 1695w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDIsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wOC5wbmcifQ%3D%3D">
							<img width="1024" height="357" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08-1024x357.png" alt="SAP EWM WOCR UNDE and DEF_08" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08-1024x357.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08-300x105.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08-768x268.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08-1536x536.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_08.png 1712w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		And this is the result:		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDMsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8wOS5wbmcifQ%3D%3D">
							<img width="1024" height="529" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09-1024x529.png" alt="SAP EWM WOCR UNDE and DEF_09" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09-1024x529.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09-300x155.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09-768x397.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09-1536x794.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_09.png 1678w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDQsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xMC5wbmcifQ%3D%3D">
							<img width="1024" height="382" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10-1024x382.png" alt="SAP EWM WOCR UNDE and DEF_10" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10-1024x382.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10-300x112.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10-768x287.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10-1536x573.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_10.png 1704w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		Double-checked with multiple HU-WTs, running through the WOCRs at the same time. Even if they are going to the same destination, EWM will create separate WOs:		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDUsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xMS5wbmcifQ%3D%3D">
							<img width="1024" height="528" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11-1024x528.png" alt="SAP EWM WOCR UNDE and DEF_11" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11-1024x528.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11-300x155.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11-768x396.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11-1536x793.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_11.png 1657w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDYsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xMi5wbmcifQ%3D%3D">
							<img width="1024" height="480" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12-1024x480.png" alt="SAP EWM WOCR UNDE and DEF_12" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12-1024x480.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12-300x141.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12-768x360.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12-1536x720.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_12.png 1718w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>Main takeaway? or What does that mean for you?</p><p>If you are</p><ul><li>working with handling units as part of the inbound process</li><li>and you have a simple putaway step/process</li><li>where you want to create one warehouse order for each HU to be putaway</li></ul><p>…it is totally fine not to create any custom WOCR at all. You can keep the customizing lean at this point and work with the standard default (DEF) rule.</p><p>But again – this is only true if you are working with HU WTs and if your WPT is of type ‘putaway’. Once you switch to product WTs or WPTs of type internal movements (e.g. for replenishment) EWM still applies the DEF rule if it does not find a WOCR but it does not apply the logic to split the WTs into a 1-1 relationship within the WOs. As the screenshot below shows, we have now a 1-n relationship between WO and WT:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDcsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xMy5wbmcifQ%3D%3D">
							<img width="1024" height="495" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13-1024x495.png" alt="SAP EWM WOCR UNDE and DEF_13" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13-1024x495.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13-300x145.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13-768x371.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13-1536x743.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_13.png 1698w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDgsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xNC5wbmcifQ%3D%3D">
							<img width="1024" height="402" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14-1024x402.png" alt="SAP EWM WOCR UNDE and DEF_14" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14-1024x402.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14-300x118.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14-768x302.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14-1536x603.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_14.png 1699w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>Putaway done! When and how does the DEF rule behave in the context of stock removal?</p><p>STOCK REMOVAL<br />Remember what the HTG told us</p><p><em>[…]This means that all the warehouse tasks for one delivery are bundled together if they are in the same activity area</em></p><p>Let’s try to find the logic behind!</p><p>Without any WOCR for the given combination of activity area and activity we are ending up with the same FM calling the same subroutine with the same constant as we saw it in our example for the putaway task creation. Subroutine <em>wcr_default</em> is the one that makes sure that warehouse orders do only receive tasks from one combination of activity area, queue and delivery / reference document / warehouse request:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMDksInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xNS5wbmcifQ%3D%3D">
							<img width="1024" height="346" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15-1024x346.png" alt="SAP EWM WOCR UNDE and DEF_15" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15-1024x346.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15-300x101.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15-768x259.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15-1536x518.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_15.png 1707w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTAsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xNi5wbmcifQ%3D%3D">
							<img width="1024" height="538" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16-1024x538.png" alt="SAP EWM WOCR UNDE and DEF_16" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16-1024x538.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16-300x158.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16-768x404.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16-1536x807.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_16.png 1665w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		Not much more to see here to be honest. The result is as expected:		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTEsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xNy5wbmcifQ%3D%3D">
							<img width="1024" height="392" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17-1024x392.png" alt="SAP EWM WOCR UNDE and DEF_17" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17-1024x392.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17-300x115.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17-768x294.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17-1536x587.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_17.png 1692w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTIsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xOC5wbmcifQ%3D%3D">
							<img width="1024" height="417" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18-1024x417.png" alt="SAP EWM WOCR UNDE and DEF_18" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18-1024x417.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18-300x122.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18-768x313.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18-1536x626.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_18.png 1708w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>Main takeaway? or What does that mean for you?</p><p>If you are working with warehouse requests (e.g. deliveries) and you do not have any specific requirement apart from</p><ul><li>creating one single warehouse order for all warehouse tasks of a single warehouse request</li><li>which are removing stock from the same activity area</li><li>and are assigned to the same queue</li></ul><p>…you do not have to configure a custom warehouse order creation rule for that but can keep it lean and work with the EWM standard default (DEF) rule.</p><p>First part done. I think that was straightforward and easy to understand! Let us now have a look at the WOCR UNDE!</p>		
		<p><strong>ANALYSING the WOCR ‘UNDE’</strong></p><p>The HTG gave us the following information for this scenario:</p><p><em>If a warehouse task doesn't fit to any warehouse order creation rule, it's bundled with the rule Undefined (UNDE), together with all the other warehouse tasks that don’t fit to any warehouse order creation rule.</em></p><p>That is not a lot of details and as you can see further below, this is not 100% true. Anyways - we now want to analyse the behavior of the EWM standard in a situation where it indeed finds a WOCR for the given combination of activity area and activity but it cannot apply this rule (e.g. because the WTs did not pass the item filter).</p><p>Same as before, we first have a look at putaway and internal movements, before we explore the stock removal.</p><p>PUTAWAY<br />For this example I created a WOCR for the given activity area / activity but set the item filter in a way that our WTs would not pass it:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTMsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8xOS5wbmcifQ%3D%3D">
							<img width="1024" height="299" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19-1024x299.png" alt="SAP EWM WOCR UNDE and DEF_19" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19-1024x299.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19-300x88.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19-768x224.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19-1536x448.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_19.png 1546w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>The relevant spot in the coding is the same as before where we ended up with rule ‘DEF’. Again, FM <em>/SCWM/WHO_PARALLEL_CREATE</em> tries to apply the WOCRs. In the scenario we are looking at now, it actually finds one WOCR for the given AA/activity (see internal table <em>lt_twcrsseq</em>):</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTQsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yMC5wbmcifQ%3D%3D">
							<img width="1024" height="357" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20-1024x357.png" alt="SAP EWM WOCR UNDE and DEF_20" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20-1024x357.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20-300x105.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20-768x268.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20-1536x535.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_20.png 1704w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTUsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yMS5wbmcifQ%3D%3D">
							<img width="1024" height="305" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21-1024x305.png" alt="SAP EWM WOCR UNDE and DEF_21" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21-1024x305.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21-300x89.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21-768x228.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21-1536x457.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_21.png 1715w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>Subroutine <em>who_wcr_apply</em> first tries to apply one of the WOCRs to the given WTs. As this fails, the FM proceeds with the ‘special logic’, trying to apply MFS or UNDE). As our tasks are not relevant for a subsystem/MFS, the only option left is to hand over the constant for the rule ‘UNDE’ to the subroutine <em>who_wcr_apply</em>, which then calls subroutine <em>wcr_undefined</em>:</p><p>The comment in subroutine wcr_undefined gives us a better understanding about what to expect:</p><p><em>* So-called "undefined" warehouse order creation rule that will be</em><br /><em>* processed if all rules of a the activity area have been processed</em><br /><em>* and there are still TOs, which were not bundled.</em><br /><em>* This rule creates one bundle per dstgrp (in an activity area and</em><br /><em>* queue).</em></p><p>@SAP Why can’t we have such details in the help text for the WOCR customizing? :-)</p><p>Based on this we expect to end up with one WO for each combination of activity area, queue and distribution group. Note that in the context of putaway the term ‘distribution group’ refers to the deconsolidation group which can be assigned to the bins based on the activity area (sitting in table <em>/SCWM/LAGPS</em>):</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTYsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yMi5wbmcifQ%3D%3D">
							<img width="1024" height="223" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22-1024x223.png" alt="SAP EWM WOCR UNDE and DEF_22" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22-1024x223.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22-300x65.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22-768x167.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22-1536x334.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_22.png 1698w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		As expected, as a result of our test we end up with one WO which is created with WOCR UNDE, carrying all WTs for which EWM could not apply one of the WOCRs from customizing. Even HU WTs of type ‘putaway’ are now combined in one WO (which is different to what we saw with WOCR ‘DEF’):		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_23.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTcsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yMy5wbmcifQ%3D%3D">
							<img width="1024" height="648" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_23-1024x648.png" alt="SAP EWM WOCR UNDE and DEF_23" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_23-1024x648.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_23-300x190.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_23-768x486.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_23.png 1320w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTgsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yNC5wbmcifQ%3D%3D">
							<img width="1024" height="440" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24-1024x440.png" alt="SAP EWM WOCR UNDE and DEF_24" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24-1024x440.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24-300x129.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24-768x330.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24-1536x660.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_24.png 1699w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		Once I use different distribution groups for the different destination bins, the result looks like this (in the example I used one bin with and one without distribution group):		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMTksInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yNS5wbmcifQ%3D%3D">
							<img width="1024" height="555" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25-1024x555.png" alt="SAP EWM WOCR UNDE and DEF_25" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25-1024x555.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25-300x163.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25-768x416.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25-1536x833.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_25.png 1623w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjAsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yNi5wbmcifQ%3D%3D">
							<img width="1024" height="452" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26-1024x452.png" alt="SAP EWM WOCR UNDE and DEF_26" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26-1024x452.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26-300x132.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26-768x339.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26-1536x678.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_26.png 1630w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>…this is the 1st point that I had in mind when I said the text in the how-to-guide is not 100% correct. As in fact, this is not happening: “it's bundled with the rule Undefined (UNDE), together with all the other warehouse tasks that don’t fit to any warehouse order creation rule”.</p><p>Note that EWM does not make a difference here between putaway or internal movements. No special rules apply based on the WPT category (like we saw before with the ‘DEF’ rule).</p><p>STOCK REMOVAL</p><p>In a similar situation during stock removal, the call stack looks exactly the same. Subroutine who_wcr_apply fails to successfully apply one of the WOCRs to each of the given WTs and FM <em>/SCWM/WHO_PARALLEL_CREATE</em> proceeds with the ‘special logic’ (trying to apply WOCR MFS or UNDE).</p><p>As our tasks are not relevant for a subsystem (rule ‘MFS’), the only option left is to hand over the constant for the rule ‘UNDE’ to the subroutine <em>who_wcr_apply</em>, which then calls subroutine <em>wcr_undefined</em>. For stock removal we can find a split logic similar to the one that we saw for the putaway scenario above. Independent from the WOCR logic discussed here, EWM fills the distribution group field in the WT with the consolidation group of the warehouse request item. For us this also means that the WOCR ‘UNDE’ will split by default based on this consolidation group for removal tasks (in the same way as it split based on the distribution group during putaway). In the context of stock removal the term ‘distribution group’ refers to the consolidation group which can be assigned the warehouse request items.</p><p>Example with a single consolidation group:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjEsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yNy5wbmcifQ%3D%3D">
							<img width="1024" height="496" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27-1024x496.png" alt="SAP EWM WOCR UNDE and DEF_27" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27-1024x496.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27-300x145.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27-768x372.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27-1536x744.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_27.png 1633w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjIsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yOC5wbmcifQ%3D%3D">
							<img width="1024" height="418" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28-1024x418.png" alt="SAP EWM WOCR UNDE and DEF_28" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28-1024x418.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28-300x122.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28-768x314.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28-1536x627.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_28.png 1629w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_30.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjQsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8zMC5wbmcifQ%3D%3D">
							<img width="1024" height="418" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_30-1024x418.png" alt="SAP EWM WOCR UNDE and DEF_30" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_30-1024x418.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_30-300x122.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_30-768x313.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_30.png 1510w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjMsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8yOS5wbmcifQ%3D%3D">
							<img width="1024" height="412" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29-1024x412.png" alt="SAP EWM WOCR UNDE and DEF_29" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29-1024x412.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29-300x121.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29-768x309.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29-1536x618.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_29.png 1614w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		Example with two different consolidation groups:		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjUsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8zMS5wbmcifQ%3D%3D">
							<img width="1024" height="319" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31-1024x319.png" alt="SAP EWM WOCR UNDE and DEF_31" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31-1024x319.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31-300x93.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31-768x239.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31-1536x478.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_31.png 1777w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjcsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8zMy5wbmcifQ%3D%3D">
							<img width="1024" height="492" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33-1024x492.png" alt="SAP EWM WOCR UNDE and DEF_33" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33-1024x492.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33-300x144.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33-768x369.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33-1536x738.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_33.png 1682w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjYsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8zMi5wbmcifQ%3D%3D">
							<img width="1024" height="476" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32-1024x476.png" alt="SAP EWM WOCR UNDE and DEF_32" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32-1024x476.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32-300x140.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32-768x357.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32-1536x715.png 1536w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_32.png 1782w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>…this is the example that I had in mind when I wrote that the statement from the how-to-guide is not 100% true:</p><p><em>If a warehouse task doesn't fit to any warehouse order creation rule, it's bundled with the rule Undefined (UNDE), together with (!!) all the other (!!) warehouse tasks that don’t fit to any warehouse order creation rule.</em></p><p><strong>Summary</strong></p><p>Unfortunately the help text included in the customizing does not help much here and also the functional books from the SAP press do only provide an absolute minimum of technical details. The HTG for WO enhancements gave us a good picture but again, a comprehensive understanding of how and why EWM applies the WOCRs DEF and UNDE could only be gathered based on a code-review.</p><p>Key points that you should take away from this blog post:</p><p>In case you do not define any WOCR at all for the given combination of activity area and activity, EWM applies the special rule ‘DEF’</p><ul><li>For HU WTs created with a WPT of category ‘1’ (putaway), EWM creates a dedicated WO for each WT</li><li>For product WTs or any other kind of WPT category, EWM creates one single WO for all such WTs in the given warehouse order creation run</li><li>For stock removal WTs, EWM creates one WO per AA &amp; queue for each delivery</li></ul><p>In case you have defined WOCR(s) for the given combination of activity area and activity but the WTs cannot be processed by those WOCR(s) (e.g. do not pass the filters), EWM applies the special rule ‘UNDE’</p><ul><li>In the context of putaway, separate WOs are created based on activity area, queue and the distribution group of the destination bin</li><li>In the context of stock removal, separate WOs are created based on activity area, queue and the consolidation group of the corresponding warehouse request items</li></ul><p>For those of you who want to explore further details about the standard coding, the subroutine <em>who_wcr_apply</em> might be the most straightforward entry point:</p>		
																<a href="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_34.png" data-elementor-open-lightbox="yes" data-e-action-hash="#elementor-action%3Aaction%3Dlightbox%26settings%3DeyJpZCI6MjAwMjgsInVybCI6Imh0dHBzOlwvXC93bWV4cGVydHMub25saW5lXC93cC1jb250ZW50XC91cGxvYWRzXC8yMDI1XC8wMVwvU0FQLUVXTS1XT0NSLVVOREUtYW5kLURFRl8zNC5wbmcifQ%3D%3D">
							<img width="1024" height="749" src="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_34-1024x749.png" alt="SAP EWM WOCR UNDE and DEF_34" srcset="https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_34-1024x749.png 1024w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_34-300x219.png 300w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_34-768x562.png 768w, https://wmexperts.online/wp-content/uploads/2025/01/SAP-EWM-WOCR-UNDE-and-DEF_34.png 1184w" sizes="(max-width: 1024px) 100vw, 1024px" />								</a>
		<p>This summary marks the end of this post. As usual, I hope I could add some value for some or the other.</p><p>In any case, thanks for spending your time to read this stuff! Enjoy learning and visit my blog again from time to time!</p>		
		<em> Please feel free to s</em><em>ubscribe to my <strong><a href="https://wmexperts.online/blog-newsletter/" target="_blank" rel="noopener">blog updates </a></strong>or my <strong><a href="https://www.youtube.com/channel/UCRcn9mXPIJ58JVTeU0oKrFg?sub_confirmation=1">youtube channel </a></strong>in case you want to be notified about new posts!</em>		
					<h2>Get my monthly blog-updates!</h2>				
					<h2>Subscribe to my Youtube channel!</h2>				
					<a href="https://www.youtube.com/channel/UCRcn9mXPIJ58JVTeU0oKrFg?sub_confirmation=1" target="_blank">
									Subscribe
					</a><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="In-depth article about SAP EWM. Learn technical and functional details about [Topic].">
    <meta name="keywords" content="SAP EWM, Warehouse Management, [Topic Keywords]">
    <meta name="author" content="Hendrik">
    <link rel="icon" type="image/png" href="/assets/favicon/wmexperts%20favicon.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Article Title | WMexperts">
    <meta property="og:description" content="In-depth article about SAP EWM. Learn technical and functional details about [Topic].">
    <meta property="article:published_time" content="2024-01-01">
    <meta property="article:modified_time" content="2024-01-01">

    <!-- Structured Data -->
    <script type="application/ld+json">
    [
      {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "Article Title",
        "description": "In-depth article about SAP EWM. Learn technical and functional details about [Topic].",
        "image": "https://wmexperts.online/assets/images/placeholder.png",
        "datePublished": "2024-01-01",
        "dateModified": "2024-01-01",
        "author": {
          "@type": "Person",
          "name": "Hendrik"
        },
        "publisher": {
          "@type": "Organization",
          "name": "WMexperts",
          "logo": {
            "@type": "ImageObject",
            "url": "https://wmexperts.online/assets/logo.png"
          }
        }
      },
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://wmexperts.online/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "https://wmexperts.online/blog-posts/category/article-slug.html"
        }]
      }
    ]
    </script>

    <title>Article Title | WMexperts</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sap-blue: #005597;
            --bg-light: #F9FAFB;
            --text-dark: #111827;
            --text-muted: #4B5563;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.8;
        }

        /* --- NAVIGATION --- */
        header {
            background: #fff;
            padding: 1rem 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo { font-weight: 600; font-size: 1.4rem; color: var(--text-dark); text-decoration: none; }
        .logo span { color: var(--sap-blue); }
        nav a { text-decoration: none; color: var(--text-muted); font-size: 0.9rem; font-weight: 600; }

        /* --- ARTICLE STRUCTURE --- */
        article { max-width: 800px; margin: 4rem auto; padding: 0 20px; }

        .breadcrumb {
            font-size: 0.75rem;
            color: var(--sap-blue);
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.8rem; color: var(--text-dark); line-height: 1.2; margin-bottom: 1.5rem; letter-spacing: -1px; }

        /* --- RESPONSIVE VIDEO CONTAINER --- */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
            margin: 2.5rem 0;
            border-radius: 12px;
            background: #000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .content p { margin-bottom: 0.75rem; font-size: 1.1rem; }
        .content h2 { color: var(--text-dark); margin-top: 1.75rem; font-size: 1.8rem; border-bottom: 2px solid var(--bg-light); padding-bottom: 0.5rem; }
        .content ul { padding-left: 1.5rem; margin-bottom: 2rem; }
        .content li { margin-bottom: 0.75rem; font-size: 1.05rem; }

        /* --- TECHNICAL & IMAGE BLOCKS --- */
        .screenshot-container { margin: 1.75rem 0; text-align: center; }
        
        .screenshot-container img {
            max-width: 66.67%;
            height: auto;
            display: block;
            margin: 0 auto;
            background-color: var(--bg-light);
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: zoom-in;
            transition: transform 0.2s ease;
        }

        .screenshot-container img:hover { transform: scale(1.01); }

        pre {
            background: #F3F4F6;
            padding: 1.25rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--sap-blue);
            margin: 2rem 0;
            color: var(--text-dark);
        }

        code {
            font-family: 'Courier New', monospace;
            background: #EEF2F6;
            color: var(--sap-blue);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.95em;
            font-weight: 500;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            font-weight: normal;
        }

        /* --- ENHANCED LIGHTBOX (ZOOM) STYLING --- */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            cursor: zoom-out;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        #lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            animation: zoomIn 0.3s ease;
        }

        #lightbox img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
            cursor: default;
        }

        /* Lightbox Controls */
        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #ffffff;
            cursor: pointer;
            z-index: 10000;
            transition: transform 0.2s ease;
            font-weight: 300;
            line-height: 1;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            transform: rotate(90deg);
        }

        .lightbox-prev,
        .lightbox-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 50px;
            color: #ffffff;
            cursor: pointer;
            padding: 20px;
            transition: opacity 0.2s ease;
            user-select: none;
            z-index: 10000;
        }

        .lightbox-prev:hover,
        .lightbox-next:hover {
            opacity: 0.7;
        }

        .lightbox-prev {
            left: 20px;
        }

        .lightbox-next {
            right: 20px;
        }

        .lightbox-counter {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffffff;
            font-size: 16px;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 10000;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from { 
                opacity: 0;
                transform: scale(0.8);
            }
            to { 
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Prevent body scroll when lightbox is open */
        body.lightbox-open {
            overflow: hidden;
        }

        /* --- STAY UPDATED SECTION --- */
        .stay-updated {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .stay-updated-card {
            background: var(--bg-light);
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stay-updated-card h3 {
            color: var(--text-dark);
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .stay-updated-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .newsletter-form {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .newsletter-form input {
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s;
        }

        .newsletter-form input:focus {
            outline: none;
            border-color: var(--sap-blue);
            box-shadow: 0 0 0 3px rgba(0, 85, 151, 0.1);
        }

        .btn-subscribe {
            padding: 10px 20px;
            background: var(--sap-blue);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .btn-subscribe:hover {
            background: var(--sap-blue-light);
        }

        .btn-youtube {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 12px 24px;
            background: #ff0000;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s ease;
            width: fit-content;
            margin-top: auto;
        }

        .btn-youtube:hover {
            background: #cc0000;
        }

        @media (max-width: 768px) {
            .stay-updated {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        /* --- FOOTER & CTA --- */
        .freelancer-cta {
            margin-top: 6rem;
            padding: 3rem;
            background: var(--bg-light);
            border-radius: 16px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .btn-freelance {
            display: inline-block;
            background: var(--sap-blue);
            color: #fff;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            margin-top: 1rem;
            transition: background 0.2s ease;
        }

        .btn-freelance:hover {
            background: #004276;
        }

        footer { padding: 4rem 10%; text-align: center; font-size: 0.85rem; color: #9CA3AF; border-top: 1px solid var(--border); }
    </style>
</head>
<body>

    <header>
        <a href="../../index.html" class="logo">WM<span>experts</span></a>
        <nav><a href="../../index.html">← Back to Blog</a></nav>
    </header>

    <article>
        <div class="breadcrumb">Category Name</div>
        <h1>Your Great SAP EWM Insight</h1>

        <div class="video-wrapper">
            <iframe src="https://www.youtube.com/embed/VIDEO_ID_HERE" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div class="content">
            <p>Example paragraph text.</p>
            <div class="screenshot-container">
                <img src="../../assets/images/placeholder.png" alt="Descriptive alt text for the image" width="800" height="450" loading="lazy">
            </div>
            <pre>/SCWM/TECHNICAL_DETAILS</pre>
        </div>

        <!-- STAY UPDATED SECTION -->
        <div class="stay-updated">
            <!-- Newsletter Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>📧 Newsletter</h3>
                    <p>Get updates about new blog posts directly in your inbox.</p>
                </div>
                <form action="https://online.us17.list-manage.com/subscribe/post?u=3dbafeb5441a290b4bfdeeb38&id=226759b4e6&f_id=00e24be0f0" method="post" class="newsletter-form" target="_blank" rel="noopener noreferrer">
                    <input type="email" name="EMAIL" placeholder="Your email" required>
                    <input type="text" name="FNAME" placeholder="First name (optional)">
                    <input type="text" name="LNAME" placeholder="Last name (optional)">
                    <input type="text" name="b_3dbafeb5441a290b4bfdeeb38_226759b4e6" style="display: none;" tabindex="-1">
                    <button type="submit" class="btn-subscribe">Subscribe</button>
                </form>
            </div>

            <!-- YouTube Card -->
            <div class="stay-updated-card">
                <div>
                    <h3>▶️ YouTube Channel</h3>
                    <p>Subscribe to my channel for regular tutorials & insights about SAP EWM.</p>
                </div>
                <a href="https://www.youtube.com/@sapewm?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn-youtube">Subscribe on YouTube</a>
            </div>
        </div>

        <div class="freelancer-cta">
            <p><strong>Need EWM expertise within your project?</strong><br>
            WMexperts.online is a knowledge-sharing project of Hendrik, a Senior SAP EWM Freelancer.</p>
            <a href="#" class="btn-freelance">Explore my Freelance Profile →</a>
        </div>
    </article>

    <!-- ENHANCED LIGHTBOX OVERLAY -->
    <div id="lightbox">
        <span class="lightbox-close" id="lightbox-close">&times;</span>
        <span class="lightbox-prev" id="lightbox-prev">&#8249;</span>
        <span class="lightbox-next" id="lightbox-next">&#8250;</span>
        <div class="lightbox-content">
            <img id="lightbox-img" src="" alt="">
        </div>
        <div class="lightbox-counter" id="lightbox-counter"></div>
    </div>

    <footer>&copy; 2026 WMexperts.online • Functional & Technical SAP EWM Expertise</footer>

    <!-- ENHANCED LIGHTBOX JAVASCRIPT -->
    <script>
        (function() {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            const lightboxPrev = document.getElementById('lightbox-prev');
            const lightboxNext = document.getElementById('lightbox-next');
            const lightboxCounter = document.getElementById('lightbox-counter');
            
            // Get all images that should be zoomable
            const images = document.querySelectorAll('.screenshot-container img, .content img');
            let currentImageIndex = 0;

            // Add click event to all images
            images.forEach((img, index) => {
                img.addEventListener('click', function() {
                    openLightbox(index);
                });
            });

            function openLightbox(index) {
                currentImageIndex = index;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                lightbox.classList.add('active');
                document.body.classList.add('lightbox-open');
                updateCounter();
                
                // Show/hide navigation arrows based on number of images
                if (images.length <= 1) {
                    lightboxPrev.style.display = 'none';
                    lightboxNext.style.display = 'none';
                } else {
                    lightboxPrev.style.display = 'block';
                    lightboxNext.style.display = 'block';
                }
            }

            function closeLightbox() {
                lightbox.classList.remove('active');
                document.body.classList.remove('lightbox-open');
            }

            function showPrevImage() {
                currentImageIndex = (currentImageIndex - 1 + images.length) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function showNextImage() {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                lightboxImg.src = images[currentImageIndex].src;
                lightboxImg.alt = images[currentImageIndex].alt;
                updateCounter();
            }

            function updateCounter() {
                if (images.length > 1) {
                    lightboxCounter.textContent = `${currentImageIndex + 1} / ${images.length}`;
                    lightboxCounter.style.display = 'block';
                } else {
                    lightboxCounter.style.display = 'none';
                }
            }

            // Event listeners
            lightboxClose.addEventListener('click', function(e) {
                e.stopPropagation();
                closeLightbox();
            });

            lightboxPrev.addEventListener('click', function(e) {
                e.stopPropagation();
                showPrevImage();
            });

            lightboxNext.addEventListener('click', function(e) {
                e.stopPropagation();
                showNextImage();
            });

            // Click on overlay background to close
            lightbox.addEventListener('click', function(e) {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (!lightbox.classList.contains('active')) return;
                
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            });

            // Prevent image content click from closing lightbox
            lightboxImg.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        })();
    </script>

</body>
</html>
